/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ContentLinkerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ContentLinkerPlugin = class extends import_obsidian.Plugin {
  /**
   * Plugin onload event handler.
   */
  async onload() {
    await this.loadSettings();
    console.log("Loading Content Linker plugin");
    this.addCommand({
      id: "search-possible-bi-directional-links",
      name: "Search possible bi-directional links in vault",
      callback: async () => {
        await this.searchPossibleBiLinks();
        await this.saveSettings();
      }
    });
    this.addSettingTab(new ContentLinkerSettingTab(this.app, this));
  }
  /**
   * Load plugin data from storage.
   */
  async loadSettings() {
    this.settings = Object.assign(
      {},
      {
        biLinks: [],
        optionsCount: 10,
        ignoredContent: [],
        relativePathOfExcludedNotes: ""
      },
      await this.loadData()
    );
  }
  /**
   * Save plugin data to storage.
   */
  async saveSettings() {
    this.saveData(this.settings);
  }
  /**
   * Search for possible bi-links in the vault.
   */
  /**
  * Search for possible bi-links in the vault.
  */
  async searchPossibleBiLinks() {
    const vault = this.app.vault;
    const { relativePathOfExcludedNotes, biLinks, ignoredContent } = this.settings;
    const isExcludedNote = (path) => relativePathOfExcludedNotes !== "" && path.includes(relativePathOfExcludedNotes);
    const notes = relativePathOfExcludedNotes === "" ? vault.getMarkdownFiles() : vault.getMarkdownFiles().filter((file) => !isExcludedNote(file.path));
    const existingBiLinks = /* @__PURE__ */ new Set();
    const potentialBiLinks = /* @__PURE__ */ new Map();
    const processNote = async (note) => {
      try {
        const content = await vault.cachedRead(note);
        const biLinkKeywords = content.match(/\[\[(.+?)\]\]/g) || [];
        const uniqueKeywords = content.match(/[\u4e00-\u9fa5]+|\b[\w-]+\b/g) || [];
        for (const biLink of biLinkKeywords) {
          const keyword = biLink.slice(2, -2);
          existingBiLinks.add(keyword);
        }
        for (const keyword of uniqueKeywords) {
          if (!potentialBiLinks.has(keyword) && !biLinks.some((biLink) => biLink.keyword === keyword) && !existingBiLinks.has(keyword) && !content.includes(`[[${keyword}]]`) && !ignoredContent.some((ignored) => ignored.keyword === keyword)) {
            potentialBiLinks.set(keyword, 1);
          } else {
            potentialBiLinks.set(
              keyword,
              (potentialBiLinks.get(keyword) || 0) + 1
            );
          }
        }
      } catch (error) {
        console.error(`Error processing note: ${note.name}`, error);
      }
    };
    await Promise.all(notes.map(processNote));
    this.settings.biLinks = Array.from(potentialBiLinks.entries()).map(([keyword, count]) => ({
      keyword,
      count,
      isSelected: false
    }));
    await this.saveSettings();
    new import_obsidian.Notice("Search finished!");
  }
};
var ContentLinkerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.notice = null;
    this.plugin = plugin;
  }
  async display() {
    const { containerEl } = this;
    containerEl.empty();
    const relativePathExclusion = new import_obsidian.Setting(containerEl).setName("Relative path of excluded notes").setDesc("Enter a relative path:");
    relativePathExclusion.addText((input) => input.setPlaceholder("Relative path of exluded notes").setValue(this.plugin.settings.relativePathOfExcludedNotes.toString()).onChange(async (value) => {
      this.plugin.settings.relativePathOfExcludedNotes = value;
      await this.plugin.saveSettings();
    }));
    const searchButton = containerEl.createEl("button", {
      text: "Search possible bi-directional links in vault"
    });
    searchButton.addEventListener("click", async () => {
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    new import_obsidian.Setting(containerEl).setName("Possible bi-directional content").setDesc("Enter a number:").addText(
      (text) => text.setValue(this.plugin.settings.optionsCount.toString()).onChange(async (value) => {
        const parsedValue = parseFloat(value);
        if (!isNaN(parsedValue)) {
          this.plugin.settings.optionsCount = parsedValue;
        }
      })
    );
    const countButton = containerEl.createEl("button", {
      text: "Update number of search results"
    });
    countButton.addEventListener("click", async () => {
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    this.updateTableofPossibleBiDirectionalContentTable();
    const updateButton = containerEl.createEl("button", {
      text: "Update bi-directional link for selected option(s)"
    });
    updateButton.addEventListener("click", async () => {
      await this.updateBiLinks();
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    const ignoreButton = containerEl.createEl("button", {
      text: "Ignore selected option(s)"
    });
    ignoreButton.addEventListener("click", async () => {
      await this.ignoreSelectedOptions();
    });
    await this.displayIgnoredContentList();
    await this.displayBiDirectionalLinksList();
  }
  async updateTableofPossibleBiDirectionalContentTable() {
    const table = this.containerEl.createEl("table", { cls: "content-linker-table" });
    const thead = table.createTHead();
    const headerRow = thead.insertRow();
    headerRow.insertCell().textContent = "No.";
    headerRow.insertCell().textContent = "Count";
    headerRow.insertCell().textContent = "Keyword";
    headerRow.insertCell().textContent = "Selected";
    const sortedBiLinks = this.plugin.settings.biLinks.sort((a, b) => b.count - a.count).slice(0, this.plugin.settings.optionsCount);
    const tbody = table.createTBody();
    for (let index = 0; index < sortedBiLinks.length; index++) {
      const { keyword, count, isSelected } = sortedBiLinks[index];
      const isAlreadyBiLink = await this.isAlreadyBiLink(keyword);
      if (!isAlreadyBiLink && !this.isIgnored(keyword)) {
        const row = tbody.insertRow();
        row.insertCell().textContent = (index + 1).toString();
        row.insertCell().textContent = count.toString();
        row.insertCell().textContent = keyword;
        row.insertCell().appendChild(this.createCheckbox(keyword, isSelected));
      }
    }
  }
  /**
   * Check if a keyword is ignored.
   * @param keyword - The keyword to check.
   * @returns True if ignored, false otherwise.
   */
  isIgnored(keyword) {
    return this.plugin.settings.ignoredContent.some(
      (ignoredContent) => ignoredContent.keyword === keyword
    );
  }
  /**
   * Check if a keyword is already a bi-link in any note.
   * @param keyword - The keyword to check.
   * @returns True if it is already a bi-link, false otherwise.
   */
  async isAlreadyBiLink(keyword) {
    const vault = this.plugin.app.vault;
    const notes = vault.getMarkdownFiles();
    for (const note of notes) {
      const content = await vault.cachedRead(note);
      const regex = new RegExp(`\\[\\[${keyword}\\]\\]`, "g");
      if (content.match(regex)) {
        return true;
      }
    }
    return false;
  }
  /**
   * Create a checkbox element for a bi-link option.
   * @param keyword - The keyword for the bi-link.
   * @param checked - Whether the checkbox is selected.
   * @returns The created checkbox element.
   */
  createCheckbox(keyword, checked) {
    const checkboxContainer = document.createElement("label");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = checked;
    checkboxContainer.appendChild(checkbox);
    checkbox.addEventListener("change", async () => {
      this.plugin.settings.biLinks = this.plugin.settings.biLinks.map(
        (biLink) => biLink.keyword === keyword ? { ...biLink, isSelected: checkbox.checked } : biLink
      );
      await this.plugin.saveSettings();
    });
    return checkboxContainer;
  }
  async updateBiLinks() {
    const selectedBiLinks = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    const vault = this.plugin.app.vault;
    const notes = vault.getMarkdownFiles();
    const totalNotes = notes.length;
    let indexCount = 0;
    const keywordToRegex = /* @__PURE__ */ new Map();
    for (const selectedBiLink of selectedBiLinks) {
      const { keyword } = selectedBiLink;
      const regexPattern = `(?<!\\[\\[)${keyword.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&")}(?!\\]\\])`;
      keywordToRegex.set(keyword, new RegExp(regexPattern, "g"));
    }
    for (const note of notes) {
      if (!this.isExcluded(note.path)) {
        let content = await vault.read(note);
        let updatedContent = content;
        for (const selectedBiLink of selectedBiLinks) {
          const { keyword } = selectedBiLink;
          const regex = keywordToRegex.get(keyword);
          if (regex) {
            updatedContent = updatedContent.replace(regex, `[[${keyword}]]`);
          }
        }
        if (updatedContent !== content) {
          await vault.modify(note, updatedContent);
        }
        indexCount++;
        this.showProgress(indexCount, totalNotes);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.map(
      (biLink) => selectedBiLinks.some(({ keyword }) => biLink.keyword === keyword) ? { ...biLink, isSelected: false } : biLink
    );
    await this.plugin.saveSettings();
    new import_obsidian.Notice("Update finished!");
  }
  /**
   * Check if a note path is excluded.
   * @param path - The path of the note.
   * @returns True if the note path is excluded, false otherwise.
   */
  isExcluded(path) {
    if (this.plugin.settings.relativePathOfExcludedNotes === "")
      return false;
    return path.includes(this.plugin.settings.relativePathOfExcludedNotes.toString());
  }
  /**
   * Ignore the selected bi-link options.
   */
  async ignoreSelectedOptions() {
    const selectedOptions = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    for (const selectedOption of selectedOptions) {
      const { keyword } = selectedOption;
      selectedOption.isSelected = false;
      if (!this.plugin.settings.ignoredContent.some(
        (ignoredContent) => ignoredContent.keyword === keyword
      )) {
        this.plugin.settings.ignoredContent.push(selectedOption);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.filter(
      (biLink) => !biLink.isSelected
    );
    await this.plugin.saveSettings();
    await this.plugin.searchPossibleBiLinks();
    await this.display();
  }
  /**
   * Display the ignored content list.
   */
  async displayIgnoredContentList() {
    const { containerEl } = this;
    const ignoredContentSetting = new import_obsidian.Setting(containerEl).setName("Ignored content list").setDesc("Keywords that you want to ignore");
    const ignoredContentTable = containerEl.createEl("table", {
      cls: "content-linker-ignored-content-table"
    });
    const ignoredContentThead = ignoredContentTable.createTHead();
    const ignoredContentHeaderRow = ignoredContentThead.insertRow();
    ignoredContentHeaderRow.insertCell().textContent = "No.";
    ignoredContentHeaderRow.insertCell().textContent = "Count";
    ignoredContentHeaderRow.insertCell().textContent = "Keyword";
    ignoredContentHeaderRow.insertCell().textContent = "Selected";
    const sortedIgnoredList = this.plugin.settings.ignoredContent.sort(
      (a, b) => b.count - a.count
    );
    const ignoredContentTbody = ignoredContentTable.createTBody();
    for (let i = 0; i < sortedIgnoredList.length; i++) {
      const { keyword, count, isSelected } = sortedIgnoredList[i];
      const row = ignoredContentTbody.insertRow();
      row.insertCell(0).textContent = (i + 1).toString();
      row.insertCell(1).textContent = count ? count.toString() : "";
      row.insertCell(2).textContent = keyword;
      row.insertCell(3).appendChild(
        this.createIgnoredCheckbox(keyword, isSelected)
      );
    }
    containerEl.appendChild(ignoredContentTable);
    const removeButton = containerEl.createEl("button", {
      text: "Remove selected option(s) from ignored content list"
    });
    removeButton.addEventListener("click", async () => {
      this.removeFromIgnoredList();
    });
  }
  /**
   * Create a checkbox element for an ignored option.
   * @param keyword - The keyword for the ignored option.
   * @param checked - Whether the checkbox is selected.
   * @returns The created checkbox element.
   */
  createIgnoredCheckbox(keyword, checked) {
    const checkboxContainer = document.createElement("label");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = checked;
    checkboxContainer.appendChild(checkbox);
    checkbox.addEventListener("change", async () => {
      this.plugin.settings.ignoredContent = this.plugin.settings.ignoredContent.map(
        (ignoredContent) => ignoredContent.keyword === keyword ? { ...ignoredContent, isSelected: checkbox.checked } : ignoredContent
      );
      await this.plugin.saveSettings();
    });
    return checkboxContainer;
  }
  /**
   * Remove the selected options from the ignored content list.
   */
  async removeFromIgnoredList() {
    const selectedIgnoredOptions = this.plugin.settings.ignoredContent.filter(
      (ignoredContent) => {
        return ignoredContent.isSelected;
      }
    );
    for (const selectedIgnoredOption of selectedIgnoredOptions) {
      const { keyword } = selectedIgnoredOption;
      const index = this.plugin.settings.ignoredContent.findIndex(
        (ignoredContent) => ignoredContent.keyword === keyword
      );
      if (index !== -1) {
        this.plugin.settings.ignoredContent.splice(index, 1);
      }
    }
    await this.plugin.saveSettings();
    await this.display();
  }
  async displayBiDirectionalLinksList() {
    const { containerEl } = this;
    const linkedContentSetting = new import_obsidian.Setting(containerEl).setName("Linked content list").setDesc("Content that is already bi-directional-linked. Count including non-bi-directional-linked format");
    const searchLinkedContentButton = containerEl.createEl("button", {
      text: "Search linked content in vault (May take long time if vault is big)"
    });
    searchLinkedContentButton.addEventListener("click", async () => {
      this.searchLinkedContent();
    });
  }
  async searchLinkedContent() {
    const linkedContentTable = this.containerEl.createEl("table", {
      cls: "content-linker-linked-content-table"
    });
    const thead = linkedContentTable.createTHead();
    const headerRow = thead.insertRow();
    headerRow.insertCell().textContent = "No.";
    headerRow.insertCell().textContent = "Count";
    headerRow.insertCell().textContent = "Keyword";
    headerRow.insertCell().textContent = "Selected";
    const sortedBiLinks = this.plugin.settings.biLinks.sort((a, b) => b.count - a.count);
    const tbody = linkedContentTable.createTBody();
    const batchSize = 10;
    const processBatch = async (batchIndex) => {
      const batchStartIndex = batchIndex * batchSize;
      const batchEndIndex = Math.min(
        batchStartIndex + batchSize,
        sortedBiLinks.length
      );
      const batchPromises = [];
      for (let i = batchStartIndex; i < batchEndIndex; i++) {
        const { keyword, count, isSelected } = sortedBiLinks[i];
        const isAlreadyBiLink = await this.isAlreadyBiLink(keyword);
        if (isAlreadyBiLink && !this.isIgnored(keyword)) {
          const row = tbody.insertRow();
          row.insertCell().textContent = (i + 1).toString();
          row.insertCell().textContent = count.toString();
          row.insertCell().textContent = keyword;
          row.insertCell().appendChild(this.createCheckbox(keyword, isSelected));
        }
      }
      if (batchEndIndex < sortedBiLinks.length) {
        batchPromises.push(processBatch(batchIndex + 1));
      }
      await Promise.all(batchPromises);
    };
    await processBatch(0);
    this.containerEl.appendChild(linkedContentTable);
    const removeButton = this.containerEl.createEl("button", {
      text: "Remove bi-directional links for selected option(s)\nAfter clicking the button, the setting page will be refreshed"
    });
    removeButton.classList.add("multiline-button");
    removeButton.style.height = "auto";
    removeButton.style.whiteSpace = "pre-line";
    removeButton.style.textAlign = "left";
    removeButton.addEventListener("click", async () => {
      await this.removeSelectedBiLinks();
    });
  }
  async removeSelectedBiLinks() {
    const selectedBiLinks = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    const selectedKeywords = new Set(
      selectedBiLinks.map((biLink) => biLink.keyword)
    );
    const vault = this.app.vault;
    const notes = this.plugin.settings.relativePathOfExcludedNotes === "" ? vault.getMarkdownFiles() : vault.getMarkdownFiles().filter((file) => !file.path.includes(this.plugin.settings.relativePathOfExcludedNotes.toString()));
    let indexCount = 0;
    for (const note of notes) {
      let content = await vault.read(note);
      let modified = false;
      for (const selectedKeyword of selectedKeywords) {
        const regex = new RegExp(
          `\\[\\[${selectedKeyword}\\]\\]`,
          "g"
        );
        if (content.match(regex)) {
          content = content.replace(regex, selectedKeyword);
          modified = true;
        }
      }
      if (modified) {
        await vault.modify(note, content);
        indexCount++;
        this.showProgress(indexCount, notes.length);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.filter(
      (biLink) => !biLink.isSelected
    );
    await this.plugin.saveSettings();
    new import_obsidian.Notice("Selected bi-directional links removed!");
    await this.plugin.searchPossibleBiLinks();
    await this.display();
  }
  async showProgress(indexCount, totalNumber) {
    if (!this.notice) {
      const message = `Updating: ${indexCount} of ${totalNumber}`;
      this.notice = new import_obsidian.Notice(message);
      setTimeout(() => {
        this.closeNotice();
      }, 3e3);
    } else {
      this.notice.setMessage(`Updating: ${indexCount} of ${totalNumber}`);
    }
    if (indexCount === totalNumber) {
      new import_obsidian.Notice("Updating finish!");
      this.closeNotice();
    }
  }
  async closeNotice() {
    if (this.notice) {
      this.notice.hide();
      this.notice = null;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgQmlMaW5rIHtcclxuICBrZXl3b3JkOiBzdHJpbmc7XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICBpc1NlbGVjdGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSWdub3JlZENvbnRlbnQge1xyXG4gIGtleXdvcmQ6IHN0cmluZztcclxuICBjb3VudDogbnVtYmVyO1xyXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb250ZW50TGlua2VyUGx1Z2luU2V0dGluZ3Mge1xyXG4gIGJpTGlua3M6IEJpTGlua1tdO1xyXG4gIG9wdGlvbnNDb3VudDogbnVtYmVyO1xyXG4gIGlnbm9yZWRDb250ZW50OiBJZ25vcmVkQ29udGVudFtdO1xyXG4gIHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3Rlczogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZW50TGlua2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHJcbiAgc2V0dGluZ3M6IENvbnRlbnRMaW5rZXJQbHVnaW5TZXR0aW5ncztcclxuXHJcbiAgLyoqXHJcbiAgICogUGx1Z2luIG9ubG9hZCBldmVudCBoYW5kbGVyLlxyXG4gICAqL1xyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgQ29udGVudCBMaW5rZXIgcGx1Z2luJyk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdzZWFyY2gtcG9zc2libGUtYmktZGlyZWN0aW9uYWwtbGlua3MnLFxyXG4gICAgICBuYW1lOiAnU2VhcmNoIHBvc3NpYmxlIGJpLWRpcmVjdGlvbmFsIGxpbmtzIGluIHZhdWx0JyxcclxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7IC8vIFNhdmUgZGF0YSBhZnRlciBtYWtpbmcgY2hhbmdlc1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBDb250ZW50TGlua2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBwbHVnaW4gZGF0YSBmcm9tIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgIHt9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYmlMaW5rczogW10sXHJcbiAgICAgICAgb3B0aW9uc0NvdW50OiAxMCxcclxuICAgICAgICBpZ25vcmVkQ29udGVudDogW10sXHJcbiAgICAgICAgcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzOiAnJyxcclxuICAgICAgfSxcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSBwbHVnaW4gZGF0YSB0byBzdG9yYWdlLlxyXG4gICAqL1xyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWFyY2ggZm9yIHBvc3NpYmxlIGJpLWxpbmtzIGluIHRoZSB2YXVsdC5cclxuICAgKi9cclxuICAvKipcclxuICogU2VhcmNoIGZvciBwb3NzaWJsZSBiaS1saW5rcyBpbiB0aGUgdmF1bHQuXHJcbiAqL1xyXG5hc3luYyBzZWFyY2hQb3NzaWJsZUJpTGlua3MoKSB7XHJcbiAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcclxuICBjb25zdCB7IHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3RlcywgYmlMaW5rcywgaWdub3JlZENvbnRlbnQgfSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgY29uc3QgaXNFeGNsdWRlZE5vdGUgPSAocGF0aDogc3RyaW5nKSA9PlxyXG4gICAgcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzICE9PSAnJyAmJiBwYXRoLmluY2x1ZGVzKHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3Rlcyk7XHJcblxyXG4gIGNvbnN0IG5vdGVzID0gcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzID09PSAnJ1xyXG4gICAgPyB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcclxuICAgIDogdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcigoZmlsZSkgPT4gIWlzRXhjbHVkZWROb3RlKGZpbGUucGF0aCkpO1xyXG5cclxuICBjb25zdCBleGlzdGluZ0JpTGlua3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICBjb25zdCBwb3RlbnRpYWxCaUxpbmtzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuXHJcbiAgY29uc3QgcHJvY2Vzc05vdGUgPSBhc3luYyAobm90ZTogVEZpbGUpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKG5vdGUpO1xyXG4gICAgICBjb25zdCBiaUxpbmtLZXl3b3JkcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyguKz8pXFxdXFxdL2cpIHx8IFtdO1xyXG4gICAgICBjb25zdCB1bmlxdWVLZXl3b3JkcyA9IGNvbnRlbnQubWF0Y2goL1tcXHU0ZTAwLVxcdTlmYTVdK3xcXGJbXFx3LV0rXFxiL2cpIHx8IFtdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBiaUxpbmsgb2YgYmlMaW5rS2V5d29yZHMpIHtcclxuICAgICAgICBjb25zdCBrZXl3b3JkID0gYmlMaW5rLnNsaWNlKDIsIC0yKTtcclxuICAgICAgICBleGlzdGluZ0JpTGlua3MuYWRkKGtleXdvcmQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGtleXdvcmQgb2YgdW5pcXVlS2V5d29yZHMpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAhcG90ZW50aWFsQmlMaW5rcy5oYXMoa2V5d29yZCkgJiZcclxuICAgICAgICAgICFiaUxpbmtzLnNvbWUoKGJpTGluaykgPT4gYmlMaW5rLmtleXdvcmQgPT09IGtleXdvcmQpICYmXHJcbiAgICAgICAgICAhZXhpc3RpbmdCaUxpbmtzLmhhcyhrZXl3b3JkKSAmJlxyXG4gICAgICAgICAgIWNvbnRlbnQuaW5jbHVkZXMoYFtbJHtrZXl3b3JkfV1dYCkgJiZcclxuICAgICAgICAgICFpZ25vcmVkQ29udGVudC5zb21lKChpZ25vcmVkKSA9PiBpZ25vcmVkLmtleXdvcmQgPT09IGtleXdvcmQpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBwb3RlbnRpYWxCaUxpbmtzLnNldChrZXl3b3JkLCAxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcG90ZW50aWFsQmlMaW5rcy5zZXQoXHJcbiAgICAgICAgICAgIGtleXdvcmQsXHJcbiAgICAgICAgICAgIChwb3RlbnRpYWxCaUxpbmtzLmdldChrZXl3b3JkKSB8fCAwKSArIDFcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIG5vdGU6ICR7bm90ZS5uYW1lfWAsIGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBhd2FpdCBQcm9taXNlLmFsbChub3Rlcy5tYXAocHJvY2Vzc05vdGUpKTtcclxuXHJcbiAgdGhpcy5zZXR0aW5ncy5iaUxpbmtzID0gQXJyYXkuZnJvbShwb3RlbnRpYWxCaUxpbmtzLmVudHJpZXMoKSlcclxuICAgIC5tYXAoKFtrZXl3b3JkLCBjb3VudF0pID0+ICh7XHJcbiAgICAgIGtleXdvcmQsXHJcbiAgICAgIGNvdW50LFxyXG4gICAgICBpc1NlbGVjdGVkOiBmYWxzZSxcclxuICAgIH0pKTtcclxuXHJcbiAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuXHJcbiAgbmV3IE5vdGljZSgnU2VhcmNoIGZpbmlzaGVkIScpO1xyXG59XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb250ZW50TGlua2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gIHBsdWdpbjogQ29udGVudExpbmtlclBsdWdpbjtcclxuICBwcml2YXRlIG5vdGljZTogTm90aWNlIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IENvbnRlbnRMaW5rZXJQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGlzcGxheSgpIHtcclxuXHJcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgLy8gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRXhjbHVkZSBub3RlcyB3aXRoIHJlbGF0aXZlIHBhdGgnIH0pO1xyXG4gICAgY29uc3QgcmVsYXRpdmVQYXRoRXhjbHVzaW9uID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdSZWxhdGl2ZSBwYXRoIG9mIGV4Y2x1ZGVkIG5vdGVzJylcclxuICAgICAgLnNldERlc2MoJ0VudGVyIGEgcmVsYXRpdmUgcGF0aDonKVxyXG4gICAgcmVsYXRpdmVQYXRoRXhjbHVzaW9uLmFkZFRleHQoaW5wdXQgPT4gaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdSZWxhdGl2ZSBwYXRoIG9mIGV4bHVkZWQgbm90ZXMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZVBhdGhPZkV4Y2x1ZGVkTm90ZXMgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuXHJcbiAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnU2VhcmNoIHBvc3NpYmxlIGJpLWRpcmVjdGlvbmFsIGxpbmtzIGluIHZhdWx0JyxcclxuICAgIH0pO1xyXG4gICAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZWFyY2hQb3NzaWJsZUJpTGlua3MoKTtcclxuICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1Bvc3NpYmxlIGJpLWRpcmVjdGlvbmFsIGNvbnRlbnQnKVxyXG4gICAgICAuc2V0RGVzYygnRW50ZXIgYSBudW1iZXI6JylcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wdGlvbnNDb3VudC50b1N0cmluZygpKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlZFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wdGlvbnNDb3VudCA9IHBhcnNlZFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgIGNvbnN0IGNvdW50QnV0dG9uID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgdGV4dDogJ1VwZGF0ZSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMnLFxyXG4gICAgfSk7XHJcbiAgICBjb3VudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2VhcmNoUG9zc2libGVCaUxpbmtzKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMuZGlzcGxheSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVUYWJsZW9mUG9zc2libGVCaURpcmVjdGlvbmFsQ29udGVudFRhYmxlKCk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlQnV0dG9uID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgdGV4dDogJ1VwZGF0ZSBiaS1kaXJlY3Rpb25hbCBsaW5rIGZvciBzZWxlY3RlZCBvcHRpb24ocyknLFxyXG4gICAgfSk7XHJcbiAgICB1cGRhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlQmlMaW5rcygpO1xyXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZWFyY2hQb3NzaWJsZUJpTGlua3MoKTtcclxuICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBpZ25vcmVCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnSWdub3JlIHNlbGVjdGVkIG9wdGlvbihzKScsXHJcbiAgICB9KTtcclxuICAgIGlnbm9yZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgdGhpcy5pZ25vcmVTZWxlY3RlZE9wdGlvbnMoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IHRoaXMuZGlzcGxheUlnbm9yZWRDb250ZW50TGlzdCgpO1xyXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5QmlEaXJlY3Rpb25hbExpbmtzTGlzdCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlVGFibGVvZlBvc3NpYmxlQmlEaXJlY3Rpb25hbENvbnRlbnRUYWJsZSgpXHJcbiAge1xyXG4gICAgY29uc3QgdGFibGUgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnY29udGVudC1saW5rZXItdGFibGUnIH0pO1xyXG5cclxuICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlVEhlYWQoKTtcclxuICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoZWFkLmluc2VydFJvdygpO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdOby4nO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdDb3VudCc7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ0tleXdvcmQnO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTZWxlY3RlZCc7XHJcblxyXG4gICAgY29uc3Qgc29ydGVkQmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3NcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxyXG4gICAgICAuc2xpY2UoMCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3B0aW9uc0NvdW50KTtcclxuXHJcbiAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc29ydGVkQmlMaW5rcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgY29uc3QgeyBrZXl3b3JkLCBjb3VudCwgaXNTZWxlY3RlZCB9ID0gc29ydGVkQmlMaW5rc1tpbmRleF07XHJcblxyXG4gICAgICBjb25zdCBpc0FscmVhZHlCaUxpbmsgPSBhd2FpdCB0aGlzLmlzQWxyZWFkeUJpTGluayhrZXl3b3JkKTtcclxuXHJcbiAgICAgIGlmICghaXNBbHJlYWR5QmlMaW5rICYmICF0aGlzLmlzSWdub3JlZChrZXl3b3JkKSkge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IHRib2R5Lmluc2VydFJvdygpO1xyXG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAoaW5kZXggKyAxKS50b1N0cmluZygpO1xyXG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBjb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBrZXl3b3JkO1xyXG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDaGVja2JveChrZXl3b3JkLCBpc1NlbGVjdGVkKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEga2V5d29yZCBpcyBpZ25vcmVkLlxyXG4gICAqIEBwYXJhbSBrZXl3b3JkIC0gVGhlIGtleXdvcmQgdG8gY2hlY2suXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBpZ25vcmVkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgaXNJZ25vcmVkKGtleXdvcmQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZWRDb250ZW50LnNvbWUoXHJcbiAgICAgIChpZ25vcmVkQ29udGVudCkgPT4gaWdub3JlZENvbnRlbnQua2V5d29yZCA9PT0ga2V5d29yZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEga2V5d29yZCBpcyBhbHJlYWR5IGEgYmktbGluayBpbiBhbnkgbm90ZS5cclxuICAgKiBAcGFyYW0ga2V5d29yZCAtIFRoZSBrZXl3b3JkIHRvIGNoZWNrLlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgaXQgaXMgYWxyZWFkeSBhIGJpLWxpbmssIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKi9cclxuICBhc3luYyBpc0FscmVhZHlCaUxpbmsoa2V5d29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCB2YXVsdCA9IHRoaXMucGx1Z2luLmFwcC52YXVsdDtcclxuICAgIGNvbnN0IG5vdGVzID0gdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG5cclxuICAgIGZvciAoY29uc3Qgbm90ZSBvZiBub3Rlcykge1xyXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdmF1bHQuY2FjaGVkUmVhZChub3RlKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXFtcXFxcWyR7a2V5d29yZH1cXFxcXVxcXFxdYCwgJ2cnKTtcclxuICAgICAgaWYgKGNvbnRlbnQubWF0Y2gocmVnZXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBjaGVja2JveCBlbGVtZW50IGZvciBhIGJpLWxpbmsgb3B0aW9uLlxyXG4gICAqIEBwYXJhbSBrZXl3b3JkIC0gVGhlIGtleXdvcmQgZm9yIHRoZSBiaS1saW5rLlxyXG4gICAqIEBwYXJhbSBjaGVja2VkIC0gV2hldGhlciB0aGUgY2hlY2tib3ggaXMgc2VsZWN0ZWQuXHJcbiAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgY2hlY2tib3ggZWxlbWVudC5cclxuICAgKi9cclxuICBjcmVhdGVDaGVja2JveChrZXl3b3JkOiBzdHJpbmcsIGNoZWNrZWQ6IGJvb2xlYW4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBjaGVja2JveENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcclxuICAgIGNoZWNrYm94LmNoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgY2hlY2tib3hDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xyXG5cclxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MubWFwKChiaUxpbmspID0+XHJcbiAgICAgICAgYmlMaW5rLmtleXdvcmQgPT09IGtleXdvcmRcclxuICAgICAgICAgID8geyAuLi5iaUxpbmssIGlzU2VsZWN0ZWQ6IGNoZWNrYm94LmNoZWNrZWQgfVxyXG4gICAgICAgICAgOiBiaUxpbmtcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGNoZWNrYm94Q29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQmlMaW5rcygpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkQmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MuZmlsdGVyKFxyXG4gICAgICAoYmlMaW5rKSA9PiBiaUxpbmsuaXNTZWxlY3RlZFxyXG4gICAgKTtcclxuICBcclxuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0O1xyXG4gICAgY29uc3Qgbm90ZXMgPSB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XHJcbiAgICBjb25zdCB0b3RhbE5vdGVzID0gbm90ZXMubGVuZ3RoO1xyXG4gIFxyXG4gICAgbGV0IGluZGV4Q291bnQgPSAwO1xyXG4gICAgY29uc3Qga2V5d29yZFRvUmVnZXggPSBuZXcgTWFwKCk7XHJcbiAgXHJcbiAgICAvLyBDcmVhdGUgYSBtYXBwaW5nIG9mIHNlbGVjdGVkIGtleXdvcmRzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgcmVnZXggcGF0dGVybnNcclxuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRCaUxpbmsgb2Ygc2VsZWN0ZWRCaUxpbmtzKSB7XHJcbiAgICAgIGNvbnN0IHsga2V5d29yZCB9ID0gc2VsZWN0ZWRCaUxpbms7XHJcbiAgICAgIGNvbnN0IHJlZ2V4UGF0dGVybiA9IGAoPzwhXFxcXFtcXFxcWykke2tleXdvcmQucmVwbGFjZSgvWy0vXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpfSg/IVxcXFxdXFxcXF0pYDtcclxuICAgICAga2V5d29yZFRvUmVnZXguc2V0KGtleXdvcmQsIG5ldyBSZWdFeHAocmVnZXhQYXR0ZXJuLCAnZycpKTtcclxuICAgIH1cclxuICBcclxuICAgIGZvciAoY29uc3Qgbm90ZSBvZiBub3Rlcykge1xyXG4gICAgICBpZiAoIXRoaXMuaXNFeGNsdWRlZChub3RlLnBhdGgpKSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKG5vdGUpO1xyXG4gICAgICAgIGxldCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdGVkQmlMaW5rIG9mIHNlbGVjdGVkQmlMaW5rcykge1xyXG4gICAgICAgICAgY29uc3QgeyBrZXl3b3JkIH0gPSBzZWxlY3RlZEJpTGluaztcclxuICAgICAgICAgIGNvbnN0IHJlZ2V4ID0ga2V5d29yZFRvUmVnZXguZ2V0KGtleXdvcmQpO1xyXG4gICAgICAgICAgaWYgKHJlZ2V4KSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRDb250ZW50ID0gdXBkYXRlZENvbnRlbnQucmVwbGFjZShyZWdleCwgYFtbJHtrZXl3b3JkfV1dYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYgKHVwZGF0ZWRDb250ZW50ICE9PSBjb250ZW50KSB7XHJcbiAgICAgICAgICBhd2FpdCB2YXVsdC5tb2RpZnkobm90ZSwgdXBkYXRlZENvbnRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGluZGV4Q291bnQrKztcclxuICAgICAgICB0aGlzLnNob3dQcm9ncmVzcyhpbmRleENvdW50LCB0b3RhbE5vdGVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgXHJcbiAgICAvLyBVcGRhdGUgdGhlIGlzU2VsZWN0ZWQgc3RhdHVzIGZvciBzZWxlY3RlZCBiaS1saW5rc1xyXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MubWFwKChiaUxpbmspID0+XHJcbiAgICAgIHNlbGVjdGVkQmlMaW5rcy5zb21lKCh7IGtleXdvcmQgfSkgPT4gYmlMaW5rLmtleXdvcmQgPT09IGtleXdvcmQpXHJcbiAgICAgICAgPyB7IC4uLmJpTGluaywgaXNTZWxlY3RlZDogZmFsc2UgfVxyXG4gICAgICAgIDogYmlMaW5rXHJcbiAgICApO1xyXG4gIFxyXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgXHJcbiAgICBuZXcgTm90aWNlKCdVcGRhdGUgZmluaXNoZWQhJyk7XHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIENoZWNrIGlmIGEgbm90ZSBwYXRoIGlzIGV4Y2x1ZGVkLlxyXG4gICAqIEBwYXJhbSBwYXRoIC0gVGhlIHBhdGggb2YgdGhlIG5vdGUuXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgbm90ZSBwYXRoIGlzIGV4Y2x1ZGVkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICovXHJcbiAgaXNFeGNsdWRlZChwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZVBhdGhPZkV4Y2x1ZGVkTm90ZXMgPT09ICcnKSByZXR1cm4gZmFsc2U7XHJcbiAgXHJcbiAgICByZXR1cm4gcGF0aC5pbmNsdWRlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZVBhdGhPZkV4Y2x1ZGVkTm90ZXMudG9TdHJpbmcoKSk7XHJcbiAgfVxyXG4gIFxyXG5cclxuICAvKipcclxuICAgKiBJZ25vcmUgdGhlIHNlbGVjdGVkIGJpLWxpbmsgb3B0aW9ucy5cclxuICAgKi9cclxuICBhc3luYyBpZ25vcmVTZWxlY3RlZE9wdGlvbnMoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzLmZpbHRlcihcclxuICAgICAgKGJpTGluaykgPT4gYmlMaW5rLmlzU2VsZWN0ZWRcclxuICAgICk7XHJcblxyXG4gICAgZm9yIChjb25zdCBzZWxlY3RlZE9wdGlvbiBvZiBzZWxlY3RlZE9wdGlvbnMpIHtcclxuICAgICAgY29uc3QgeyBrZXl3b3JkIH0gPSBzZWxlY3RlZE9wdGlvbjtcclxuICAgICAgLy8gc2V0IHRoZSBpc1NlbGVjdGVkIHN0YXR1cyB0byBmYWxzZVxyXG4gICAgICBzZWxlY3RlZE9wdGlvbi5pc1NlbGVjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBhZGQgc2VsZWN0ZWQgb3B0aW9ucyB0byBpZ25vcmVkIGxpc3RcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5zb21lKFxyXG4gICAgICAgICAgKGlnbm9yZWRDb250ZW50KSA9PiBpZ25vcmVkQ29udGVudC5rZXl3b3JkID09PSBrZXl3b3JkXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5wdXNoKHNlbGVjdGVkT3B0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBmcm9tIHRoZSBiaS1saW5rcyBhcnJheVxyXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MuZmlsdGVyKFxyXG4gICAgICAoYmlMaW5rKSA9PiAhYmlMaW5rLmlzU2VsZWN0ZWRcclxuICAgICk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2VhcmNoUG9zc2libGVCaUxpbmtzKCk7XHJcbiAgICBhd2FpdCB0aGlzLmRpc3BsYXkoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERpc3BsYXkgdGhlIGlnbm9yZWQgY29udGVudCBsaXN0LlxyXG4gICAqL1xyXG4gIGFzeW5jIGRpc3BsYXlJZ25vcmVkQ29udGVudExpc3QoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgIGNvbnN0IGlnbm9yZWRDb250ZW50U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnSWdub3JlZCBjb250ZW50IGxpc3QnKVxyXG4gICAgICAuc2V0RGVzYygnS2V5d29yZHMgdGhhdCB5b3Ugd2FudCB0byBpZ25vcmUnKTtcclxuXHJcbiAgICBjb25zdCBpZ25vcmVkQ29udGVudFRhYmxlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3RhYmxlJywge1xyXG4gICAgICBjbHM6ICdjb250ZW50LWxpbmtlci1pZ25vcmVkLWNvbnRlbnQtdGFibGUnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgaWdub3JlZENvbnRlbnRUaGVhZCA9IGlnbm9yZWRDb250ZW50VGFibGUuY3JlYXRlVEhlYWQoKTtcclxuICAgIGNvbnN0IGlnbm9yZWRDb250ZW50SGVhZGVyUm93ID0gaWdub3JlZENvbnRlbnRUaGVhZC5pbnNlcnRSb3coKTtcclxuICAgIGlnbm9yZWRDb250ZW50SGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdOby4nO1xyXG4gICAgaWdub3JlZENvbnRlbnRIZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ0NvdW50JztcclxuICAgIGlnbm9yZWRDb250ZW50SGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdLZXl3b3JkJztcclxuICAgIGlnbm9yZWRDb250ZW50SGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTZWxlY3RlZCc7XHJcblxyXG4gICAgY29uc3Qgc29ydGVkSWdub3JlZExpc3QgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5zb3J0KFxyXG4gICAgICAoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnRcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgaWdub3JlZENvbnRlbnRUYm9keSA9IGlnbm9yZWRDb250ZW50VGFibGUuY3JlYXRlVEJvZHkoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkSWdub3JlZExpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgeyBrZXl3b3JkLCBjb3VudCwgaXNTZWxlY3RlZCB9ID0gc29ydGVkSWdub3JlZExpc3RbaV07XHJcblxyXG4gICAgICBjb25zdCByb3cgPSBpZ25vcmVkQ29udGVudFRib2R5Lmluc2VydFJvdygpO1xyXG4gICAgICByb3cuaW5zZXJ0Q2VsbCgwKS50ZXh0Q29udGVudCA9IChpICsgMSkudG9TdHJpbmcoKTtcclxuICAgICAgcm93Lmluc2VydENlbGwoMSkudGV4dENvbnRlbnQgPSBjb3VudCA/IGNvdW50LnRvU3RyaW5nKCkgOiAnJztcclxuICAgICAgcm93Lmluc2VydENlbGwoMikudGV4dENvbnRlbnQgPSBrZXl3b3JkO1xyXG4gICAgICByb3cuaW5zZXJ0Q2VsbCgzKS5hcHBlbmRDaGlsZChcclxuICAgICAgICB0aGlzLmNyZWF0ZUlnbm9yZWRDaGVja2JveChrZXl3b3JkLCBpc1NlbGVjdGVkKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGlnbm9yZWRDb250ZW50VGFibGUpO1xyXG5cclxuICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgIHRleHQ6ICdSZW1vdmUgc2VsZWN0ZWQgb3B0aW9uKHMpIGZyb20gaWdub3JlZCBjb250ZW50IGxpc3QnLFxyXG4gICAgfSk7XHJcbiAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBmcm9tIHRoZSBpZ25vcmVkIGNvbnRlbnQgbGlzdFxyXG4gICAgICB0aGlzLnJlbW92ZUZyb21JZ25vcmVkTGlzdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBjaGVja2JveCBlbGVtZW50IGZvciBhbiBpZ25vcmVkIG9wdGlvbi5cclxuICAgKiBAcGFyYW0ga2V5d29yZCAtIFRoZSBrZXl3b3JkIGZvciB0aGUgaWdub3JlZCBvcHRpb24uXHJcbiAgICogQHBhcmFtIGNoZWNrZWQgLSBXaGV0aGVyIHRoZSBjaGVja2JveCBpcyBzZWxlY3RlZC5cclxuICAgKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBjaGVja2JveCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGNyZWF0ZUlnbm9yZWRDaGVja2JveChrZXl3b3JkOiBzdHJpbmcsIGNoZWNrZWQ6IGJvb2xlYW4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBjaGVja2JveENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcclxuICAgIGNoZWNrYm94LmNoZWNrZWQgPSBjaGVja2VkO1xyXG4gICAgY2hlY2tib3hDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xyXG5cclxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5tYXAoXHJcbiAgICAgICAgKGlnbm9yZWRDb250ZW50KSA9PlxyXG4gICAgICAgICAgaWdub3JlZENvbnRlbnQua2V5d29yZCA9PT0ga2V5d29yZFxyXG4gICAgICAgICAgICA/IHsgLi4uaWdub3JlZENvbnRlbnQsIGlzU2VsZWN0ZWQ6IGNoZWNrYm94LmNoZWNrZWQgfVxyXG4gICAgICAgICAgICA6IGlnbm9yZWRDb250ZW50XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjaGVja2JveENvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBmcm9tIHRoZSBpZ25vcmVkIGNvbnRlbnQgbGlzdC5cclxuICAgKi9cclxuICBhc3luYyByZW1vdmVGcm9tSWdub3JlZExpc3QoKSB7XHJcbiAgICAvLyBHZXQgc2VsZWN0ZWQgaWdub3JlZCBvcHRpb25zXHJcbiAgICBjb25zdCBzZWxlY3RlZElnbm9yZWRPcHRpb25zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuZmlsdGVyKFxyXG4gICAgICAoaWdub3JlZENvbnRlbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gaWdub3JlZENvbnRlbnQuaXNTZWxlY3RlZDtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHNlbGVjdGVkSWdub3JlZE9wdGlvbiBvZiBzZWxlY3RlZElnbm9yZWRPcHRpb25zKSB7XHJcbiAgICAgIGNvbnN0IHsga2V5d29yZCB9ID0gc2VsZWN0ZWRJZ25vcmVkT3B0aW9uO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGZyb20gaWdub3JlZCBjb250ZW50IGxpc3RcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5maW5kSW5kZXgoXHJcbiAgICAgICAgKGlnbm9yZWRDb250ZW50KSA9PiBpZ25vcmVkQ29udGVudC5rZXl3b3JkID09PSBrZXl3b3JkXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVkQ29udGVudC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7IC8vIFJlZnJlc2ggdGhlIGlnbm9yZWQgY29udGVudCBsaXN0XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNwbGF5QmlEaXJlY3Rpb25hbExpbmtzTGlzdCgpIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgXHJcbiAgICBjb25zdCBsaW5rZWRDb250ZW50U2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnTGlua2VkIGNvbnRlbnQgbGlzdCcpXHJcbiAgICAgIC5zZXREZXNjKCdDb250ZW50IHRoYXQgaXMgYWxyZWFkeSBiaS1kaXJlY3Rpb25hbC1saW5rZWQuIENvdW50IGluY2x1ZGluZyBub24tYmktZGlyZWN0aW9uYWwtbGlua2VkIGZvcm1hdCcpO1xyXG4gIFxyXG4gICAgY29uc3Qgc2VhcmNoTGlua2VkQ29udGVudEJ1dHRvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgIHRleHQ6ICdTZWFyY2ggbGlua2VkIGNvbnRlbnQgaW4gdmF1bHQgKE1heSB0YWtlIGxvbmcgdGltZSBpZiB2YXVsdCBpcyBiaWcpJyxcclxuICAgIH0pO1xyXG4gICAgc2VhcmNoTGlua2VkQ29udGVudEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gc2VhcmNoIGFscmVhZHkgbGlua2VkIGNvbnRlbnQgaW4gdmF1bHRcclxuICAgICAgdGhpcy5zZWFyY2hMaW5rZWRDb250ZW50KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNlYXJjaExpbmtlZENvbnRlbnQoKSB7XHJcbiAgICBjb25zdCBsaW5rZWRDb250ZW50VGFibGUgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCd0YWJsZScsIHtcclxuICAgICAgY2xzOiAnY29udGVudC1saW5rZXItbGlua2VkLWNvbnRlbnQtdGFibGUnLFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCB0aGVhZCA9IGxpbmtlZENvbnRlbnRUYWJsZS5jcmVhdGVUSGVhZCgpO1xyXG4gICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuaW5zZXJ0Um93KCk7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ05vLic7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ0NvdW50JztcclxuICAgIGhlYWRlclJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnS2V5d29yZCc7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ1NlbGVjdGVkJztcclxuICBcclxuICAgIGNvbnN0IHNvcnRlZEJpTGlua3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XHJcbiAgXHJcbiAgICBjb25zdCB0Ym9keSA9IGxpbmtlZENvbnRlbnRUYWJsZS5jcmVhdGVUQm9keSgpO1xyXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7IC8vIEFkanVzdCB0aGUgYmF0Y2ggc2l6ZSBhcyBuZWVkZWRcclxuICBcclxuICAgIGNvbnN0IHByb2Nlc3NCYXRjaCA9IGFzeW5jIChiYXRjaEluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgY29uc3QgYmF0Y2hTdGFydEluZGV4ID0gYmF0Y2hJbmRleCAqIGJhdGNoU2l6ZTtcclxuICAgICAgY29uc3QgYmF0Y2hFbmRJbmRleCA9IE1hdGgubWluKFxyXG4gICAgICAgIGJhdGNoU3RhcnRJbmRleCArIGJhdGNoU2l6ZSxcclxuICAgICAgICBzb3J0ZWRCaUxpbmtzLmxlbmd0aFxyXG4gICAgICApO1xyXG4gIFxyXG4gICAgICBjb25zdCBiYXRjaFByb21pc2VzID0gW107XHJcbiAgXHJcbiAgICAgIGZvciAobGV0IGkgPSBiYXRjaFN0YXJ0SW5kZXg7IGkgPCBiYXRjaEVuZEluZGV4OyBpKyspIHtcclxuICAgICAgICBjb25zdCB7IGtleXdvcmQsIGNvdW50LCBpc1NlbGVjdGVkIH0gPSBzb3J0ZWRCaUxpbmtzW2ldO1xyXG4gIFxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBrZXl3b3JkIGlzIGFscmVhZHkgYSBiaS1saW5rIGluIGFueSBub3RlXHJcbiAgICAgICAgY29uc3QgaXNBbHJlYWR5QmlMaW5rID0gYXdhaXQgdGhpcy5pc0FscmVhZHlCaUxpbmsoa2V5d29yZCk7XHJcbiAgXHJcbiAgICAgICAgaWYgKGlzQWxyZWFkeUJpTGluayAmJiAhdGhpcy5pc0lnbm9yZWQoa2V5d29yZCkpIHtcclxuICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5Lmluc2VydFJvdygpO1xyXG4gICAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IChpICsgMSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgIHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBjb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGtleXdvcmQ7XHJcbiAgICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ2hlY2tib3goa2V5d29yZCwgaXNTZWxlY3RlZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbW9yZSBpdGVtcyB0byBwcm9jZXNzLCBjb250aW51ZSB3aXRoIHRoZSBuZXh0IGJhdGNoXHJcbiAgICAgIGlmIChiYXRjaEVuZEluZGV4IDwgc29ydGVkQmlMaW5rcy5sZW5ndGgpIHtcclxuICAgICAgICBiYXRjaFByb21pc2VzLnB1c2gocHJvY2Vzc0JhdGNoKGJhdGNoSW5kZXggKyAxKSk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgLy8gU3RhcnQgcHJvY2Vzc2luZyB0aGUgZmlyc3QgYmF0Y2hcclxuICAgIGF3YWl0IHByb2Nlc3NCYXRjaCgwKTtcclxuICBcclxuICAgIC8vIEFsbCBpdGVtcyBoYXZlIGJlZW4gcHJvY2Vzc2VkLCBub3cgdXBkYXRlIHRoZSBVSVxyXG4gICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChsaW5rZWRDb250ZW50VGFibGUpO1xyXG4gIFxyXG4gICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnUmVtb3ZlIGJpLWRpcmVjdGlvbmFsIGxpbmtzIGZvciBzZWxlY3RlZCBvcHRpb24ocylcXG5BZnRlciBjbGlja2luZyB0aGUgYnV0dG9uLCB0aGUgc2V0dGluZyBwYWdlIHdpbGwgYmUgcmVmcmVzaGVkJyxcclxuICAgIH0pO1xyXG4gICAgcmVtb3ZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ211bHRpbGluZS1idXR0b24nKTtcclxuICAgIHJlbW92ZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XHJcbiAgICByZW1vdmVCdXR0b24uc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtbGluZSc7XHJcbiAgICByZW1vdmVCdXR0b24uc3R5bGUudGV4dEFsaWduID0gJ2xlZnQnO1xyXG4gICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBSZW1vdmUgYmktZGlyZWN0aW9uYWwgbGlua3MgZm9yIHNlbGVjdGVkIG9wdGlvbnMgYW5kIHJlZnJlc2ggdGhlIHNldHRpbmcgcGFnZVxyXG4gICAgICBhd2FpdCB0aGlzLnJlbW92ZVNlbGVjdGVkQmlMaW5rcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHJlbW92ZVNlbGVjdGVkQmlMaW5rcygpIHtcclxuICAgIGNvbnN0IHNlbGVjdGVkQmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MuZmlsdGVyKFxyXG4gICAgICAoYmlMaW5rKSA9PiBiaUxpbmsuaXNTZWxlY3RlZFxyXG4gICAgKTtcclxuICBcclxuICAgIC8vIFN0ZXAgMTogQ3JlYXRlIGEgc2V0IG9mIHNlbGVjdGVkIGtleXdvcmRzXHJcbiAgICBjb25zdCBzZWxlY3RlZEtleXdvcmRzID0gbmV3IFNldDxzdHJpbmc+KFxyXG4gICAgICBzZWxlY3RlZEJpTGlua3MubWFwKChiaUxpbmspID0+IGJpTGluay5rZXl3b3JkKVxyXG4gICAgKTtcclxuICBcclxuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XHJcbiAgICBjb25zdCBub3RlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3RlcyA9PT0gJydcclxuICAgICAgPyB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcclxuICAgICAgOiB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gIWZpbGUucGF0aC5pbmNsdWRlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZVBhdGhPZkV4Y2x1ZGVkTm90ZXMudG9TdHJpbmcoKSkpO1xyXG4gIFxyXG4gICAgbGV0IGluZGV4Q291bnQgPSAwO1xyXG4gIFxyXG4gICAgLy8gU3RlcCAyOiBJdGVyYXRlIHRocm91Z2ggYWxsIG5vdGVzIGluIHRoZSBsaWJyYXJ5XHJcbiAgICBmb3IgKGNvbnN0IG5vdGUgb2Ygbm90ZXMpIHtcclxuICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKG5vdGUpO1xyXG4gICAgICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBcclxuICAgICAgLy8gU3RlcCAzOiBDaGVjayBpZiB0aGUgbm90ZSBjb250YWlucyBhbnkgb2YgdGhlIHNlbGVjdGVkIGtleXdvcmRzXHJcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRLZXl3b3JkIG9mIHNlbGVjdGVkS2V5d29yZHMpIHtcclxuICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXHJcbiAgICAgICAgICBgXFxcXFtcXFxcWyR7c2VsZWN0ZWRLZXl3b3JkfVxcXFxdXFxcXF1gLFxyXG4gICAgICAgICAgJ2cnXHJcbiAgICAgICAgKTtcclxuICBcclxuICAgICAgICBpZiAoY29udGVudC5tYXRjaChyZWdleCkpIHtcclxuICAgICAgICAgIC8vIFN0ZXAgNDogUmVtb3ZlIHRoZSBiaWRpcmVjdGlvbmFsIGxpbmtcclxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsIHNlbGVjdGVkS2V5d29yZCk7XHJcbiAgICAgICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIFN0ZXAgNTogVXBkYXRlIHRoZSBub3RlIGlmIGl0IHdhcyBtb2RpZmllZFxyXG4gICAgICBpZiAobW9kaWZpZWQpIHtcclxuICAgICAgICBhd2FpdCB2YXVsdC5tb2RpZnkobm90ZSwgY29udGVudCk7XHJcbiAgICAgICAgaW5kZXhDb3VudCsrO1xyXG4gICAgICAgIHRoaXMuc2hvd1Byb2dyZXNzKGluZGV4Q291bnQsIG5vdGVzLmxlbmd0aCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIC8vIFJlbW92ZSB0aGUgc2VsZWN0ZWQgb3B0aW9ucyBmcm9tIHRoZSBiaS1saW5rcyBhcnJheVxyXG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MuZmlsdGVyKFxyXG4gICAgICAoYmlMaW5rKSA9PiAhYmlMaW5rLmlzU2VsZWN0ZWRcclxuICAgICk7XHJcbiAgXHJcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgIG5ldyBOb3RpY2UoJ1NlbGVjdGVkIGJpLWRpcmVjdGlvbmFsIGxpbmtzIHJlbW92ZWQhJyk7XHJcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZWFyY2hQb3NzaWJsZUJpTGlua3MoKTtcclxuICAgIGF3YWl0IHRoaXMuZGlzcGxheSgpO1xyXG4gIH0gIFxyXG5cclxuICBhc3luYyBzaG93UHJvZ3Jlc3MoaW5kZXhDb3VudDogbnVtYmVyLCB0b3RhbE51bWJlcjogbnVtYmVyKSB7XHJcbiAgICBpZiAoIXRoaXMubm90aWNlKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVXBkYXRpbmc6ICR7aW5kZXhDb3VudH0gb2YgJHt0b3RhbE51bWJlcn1gO1xyXG4gICAgICB0aGlzLm5vdGljZSA9IG5ldyBOb3RpY2UobWVzc2FnZSk7XHJcbiAgXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2VOb3RpY2UoKTtcclxuICAgICAgfSwgMzAwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm5vdGljZS5zZXRNZXNzYWdlKGBVcGRhdGluZzogJHtpbmRleENvdW50fSBvZiAke3RvdGFsTnVtYmVyfWApO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgaWYgKGluZGV4Q291bnQgPT09IHRvdGFsTnVtYmVyKSB7XHJcbiAgICAgIG5ldyBOb3RpY2UoJ1VwZGF0aW5nIGZpbmlzaCEnKTtcclxuICAgICAgdGhpcy5jbG9zZU5vdGljZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBhc3luYyBjbG9zZU5vdGljZSgpIHtcclxuICAgIGlmICh0aGlzLm5vdGljZSkge1xyXG4gICAgICB0aGlzLm5vdGljZS5oaWRlKCk7XHJcbiAgICAgIHRoaXMubm90aWNlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFzRTtBQXFCdEUsSUFBcUIsc0JBQXJCLGNBQWlELHVCQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPdEQsTUFBTSxTQUFTO0FBQ2IsVUFBTSxLQUFLLGFBQWE7QUFFeEIsWUFBUSxJQUFJLCtCQUErQjtBQUUzQyxTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsWUFBWTtBQUNwQixjQUFNLEtBQUssc0JBQXNCO0FBQ2pDLGNBQU0sS0FBSyxhQUFhO0FBQUEsTUFDMUI7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLGNBQWMsSUFBSSx3QkFBd0IsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQ2hFO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGVBQWU7QUFDbkIsU0FBSyxXQUFXLE9BQU87QUFBQSxNQUNyQixDQUFDO0FBQUEsTUFDRDtBQUFBLFFBQ0UsU0FBUyxDQUFDO0FBQUEsUUFDVixjQUFjO0FBQUEsUUFDZCxnQkFBZ0IsQ0FBQztBQUFBLFFBQ2pCLDZCQUE2QjtBQUFBLE1BQy9CO0FBQUEsTUFDQSxNQUFNLEtBQUssU0FBUztBQUFBLElBQ3RCO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxlQUFlO0FBQ25CLFNBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUYsTUFBTSx3QkFBd0I7QUFDNUIsVUFBTSxRQUFRLEtBQUssSUFBSTtBQUN2QixVQUFNLEVBQUUsNkJBQTZCLFNBQVMsZUFBZSxJQUFJLEtBQUs7QUFDdEUsVUFBTSxpQkFBaUIsQ0FBQyxTQUN0QixnQ0FBZ0MsTUFBTSxLQUFLLFNBQVMsMkJBQTJCO0FBRWpGLFVBQU0sUUFBUSxnQ0FBZ0MsS0FDMUMsTUFBTSxpQkFBaUIsSUFDdkIsTUFBTSxpQkFBaUIsRUFBRSxPQUFPLENBQUMsU0FBUyxDQUFDLGVBQWUsS0FBSyxJQUFJLENBQUM7QUFFeEUsVUFBTSxrQkFBa0Isb0JBQUksSUFBWTtBQUN4QyxVQUFNLG1CQUFtQixvQkFBSSxJQUFvQjtBQUVqRCxVQUFNLGNBQWMsT0FBTyxTQUFnQjtBQUN6QyxVQUFJO0FBQ0YsY0FBTSxVQUFVLE1BQU0sTUFBTSxXQUFXLElBQUk7QUFDM0MsY0FBTSxpQkFBaUIsUUFBUSxNQUFNLGdCQUFnQixLQUFLLENBQUM7QUFDM0QsY0FBTSxpQkFBaUIsUUFBUSxNQUFNLDhCQUE4QixLQUFLLENBQUM7QUFFekUsbUJBQVcsVUFBVSxnQkFBZ0I7QUFDbkMsZ0JBQU0sVUFBVSxPQUFPLE1BQU0sR0FBRyxFQUFFO0FBQ2xDLDBCQUFnQixJQUFJLE9BQU87QUFBQSxRQUM3QjtBQUVBLG1CQUFXLFdBQVcsZ0JBQWdCO0FBQ3BDLGNBQ0UsQ0FBQyxpQkFBaUIsSUFBSSxPQUFPLEtBQzdCLENBQUMsUUFBUSxLQUFLLENBQUMsV0FBVyxPQUFPLFlBQVksT0FBTyxLQUNwRCxDQUFDLGdCQUFnQixJQUFJLE9BQU8sS0FDNUIsQ0FBQyxRQUFRLFNBQVMsS0FBSyxXQUFXLEtBQ2xDLENBQUMsZUFBZSxLQUFLLENBQUMsWUFBWSxRQUFRLFlBQVksT0FBTyxHQUM3RDtBQUNBLDZCQUFpQixJQUFJLFNBQVMsQ0FBQztBQUFBLFVBQ2pDLE9BQU87QUFDTCw2QkFBaUI7QUFBQSxjQUNmO0FBQUEsZUFDQyxpQkFBaUIsSUFBSSxPQUFPLEtBQUssS0FBSztBQUFBLFlBQ3pDO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQUNGLFNBQVMsT0FBUDtBQUNBLGdCQUFRLE1BQU0sMEJBQTBCLEtBQUssUUFBUSxLQUFLO0FBQUEsTUFDNUQ7QUFBQSxJQUNGO0FBRUEsVUFBTSxRQUFRLElBQUksTUFBTSxJQUFJLFdBQVcsQ0FBQztBQUV4QyxTQUFLLFNBQVMsVUFBVSxNQUFNLEtBQUssaUJBQWlCLFFBQVEsQ0FBQyxFQUMxRCxJQUFJLENBQUMsQ0FBQyxTQUFTLEtBQUssT0FBTztBQUFBLE1BQzFCO0FBQUEsTUFDQTtBQUFBLE1BQ0EsWUFBWTtBQUFBLElBQ2QsRUFBRTtBQUVKLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFFBQUksdUJBQU8sa0JBQWtCO0FBQUEsRUFDL0I7QUFFQTtBQUVBLElBQU0sMEJBQU4sY0FBc0MsaUNBQWlCO0FBQUEsRUFJckQsWUFBWSxLQUFVLFFBQTZCO0FBQ2pELFVBQU0sS0FBSyxNQUFNO0FBSG5CLFNBQVEsU0FBd0I7QUFJOUIsU0FBSyxTQUFTO0FBQUEsRUFDaEI7QUFBQSxFQUVBLE1BQU0sVUFBVTtBQUVkLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFFeEIsZ0JBQVksTUFBTTtBQUdsQixVQUFNLHdCQUF3QixJQUFJLHdCQUFRLFdBQVcsRUFDbEQsUUFBUSxpQ0FBaUMsRUFDekMsUUFBUSx3QkFBd0I7QUFDbkMsMEJBQXNCLFFBQVEsV0FBUyxNQUNOLGVBQWUsZ0NBQWdDLEVBQy9DLFNBQVMsS0FBSyxPQUFPLFNBQVMsNEJBQTRCLFNBQVMsQ0FBQyxFQUNwRSxTQUFTLE9BQU8sVUFBVTtBQUN6QixXQUFLLE9BQU8sU0FBUyw4QkFBOEI7QUFDbkQsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUVsQyxVQUFNLGVBQWUsWUFBWSxTQUFTLFVBQVU7QUFBQSxNQUNsRCxNQUFNO0FBQUEsSUFDUixDQUFDO0FBQ0QsaUJBQWEsaUJBQWlCLFNBQVMsWUFBWTtBQUNqRCxZQUFNLEtBQUssT0FBTyxzQkFBc0I7QUFDeEMsWUFBTSxLQUFLLFFBQVE7QUFBQSxJQUNyQixDQUFDO0FBRUQsUUFBSSx3QkFBUSxXQUFXLEVBQ3BCLFFBQVEsaUNBQWlDLEVBQ3pDLFFBQVEsaUJBQWlCLEVBQ3pCO0FBQUEsTUFBUSxDQUFDLFNBQ1IsS0FDRyxTQUFTLEtBQUssT0FBTyxTQUFTLGFBQWEsU0FBUyxDQUFDLEVBQ3JELFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGNBQU0sY0FBYyxXQUFXLEtBQUs7QUFDcEMsWUFBSSxDQUFDLE1BQU0sV0FBVyxHQUFHO0FBQ3ZCLGVBQUssT0FBTyxTQUFTLGVBQWU7QUFBQSxRQUN0QztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0w7QUFFRixVQUFNLGNBQWMsWUFBWSxTQUFTLFVBQVU7QUFBQSxNQUNqRCxNQUFNO0FBQUEsSUFDUixDQUFDO0FBQ0QsZ0JBQVksaUJBQWlCLFNBQVMsWUFBWTtBQUNoRCxZQUFNLEtBQUssT0FBTyxzQkFBc0I7QUFDeEMsWUFBTSxLQUFLLFFBQVE7QUFBQSxJQUNyQixDQUFDO0FBRUQsU0FBSywrQ0FBK0M7QUFFcEQsVUFBTSxlQUFlLFlBQVksU0FBUyxVQUFVO0FBQUEsTUFDbEQsTUFBTTtBQUFBLElBQ1IsQ0FBQztBQUNELGlCQUFhLGlCQUFpQixTQUFTLFlBQVk7QUFDakQsWUFBTSxLQUFLLGNBQWM7QUFDekIsWUFBTSxLQUFLLE9BQU8sc0JBQXNCO0FBQ3hDLFlBQU0sS0FBSyxRQUFRO0FBQUEsSUFDckIsQ0FBQztBQUVELFVBQU0sZUFBZSxZQUFZLFNBQVMsVUFBVTtBQUFBLE1BQ2xELE1BQU07QUFBQSxJQUNSLENBQUM7QUFDRCxpQkFBYSxpQkFBaUIsU0FBUyxZQUFZO0FBQ2pELFlBQU0sS0FBSyxzQkFBc0I7QUFBQSxJQUNuQyxDQUFDO0FBRUQsVUFBTSxLQUFLLDBCQUEwQjtBQUNyQyxVQUFNLEtBQUssOEJBQThCO0FBQUEsRUFDM0M7QUFBQSxFQUVBLE1BQU0saURBQ047QUFDRSxVQUFNLFFBQVEsS0FBSyxZQUFZLFNBQVMsU0FBUyxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFFaEYsVUFBTSxRQUFRLE1BQU0sWUFBWTtBQUNoQyxVQUFNLFlBQVksTUFBTSxVQUFVO0FBQ2xDLGNBQVUsV0FBVyxFQUFFLGNBQWM7QUFDckMsY0FBVSxXQUFXLEVBQUUsY0FBYztBQUNyQyxjQUFVLFdBQVcsRUFBRSxjQUFjO0FBQ3JDLGNBQVUsV0FBVyxFQUFFLGNBQWM7QUFFckMsVUFBTSxnQkFBZ0IsS0FBSyxPQUFPLFNBQVMsUUFDeEMsS0FBSyxDQUFDLEdBQUcsTUFBTSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQ2hDLE1BQU0sR0FBRyxLQUFLLE9BQU8sU0FBUyxZQUFZO0FBRTdDLFVBQU0sUUFBUSxNQUFNLFlBQVk7QUFDaEMsYUFBUyxRQUFRLEdBQUcsUUFBUSxjQUFjLFFBQVEsU0FBUztBQUN6RCxZQUFNLEVBQUUsU0FBUyxPQUFPLFdBQVcsSUFBSSxjQUFjLEtBQUs7QUFFMUQsWUFBTSxrQkFBa0IsTUFBTSxLQUFLLGdCQUFnQixPQUFPO0FBRTFELFVBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLFVBQVUsT0FBTyxHQUFHO0FBQ2hELGNBQU0sTUFBTSxNQUFNLFVBQVU7QUFDNUIsWUFBSSxXQUFXLEVBQUUsZUFBZSxRQUFRLEdBQUcsU0FBUztBQUNwRCxZQUFJLFdBQVcsRUFBRSxjQUFjLE1BQU0sU0FBUztBQUM5QyxZQUFJLFdBQVcsRUFBRSxjQUFjO0FBQy9CLFlBQUksV0FBVyxFQUFFLFlBQVksS0FBSyxlQUFlLFNBQVMsVUFBVSxDQUFDO0FBQUEsTUFDdkU7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLFVBQVUsU0FBMEI7QUFDbEMsV0FBTyxLQUFLLE9BQU8sU0FBUyxlQUFlO0FBQUEsTUFDekMsQ0FBQyxtQkFBbUIsZUFBZSxZQUFZO0FBQUEsSUFDakQ7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxnQkFBZ0IsU0FBbUM7QUFDdkQsVUFBTSxRQUFRLEtBQUssT0FBTyxJQUFJO0FBQzlCLFVBQU0sUUFBUSxNQUFNLGlCQUFpQjtBQUVyQyxlQUFXLFFBQVEsT0FBTztBQUN4QixZQUFNLFVBQVUsTUFBTSxNQUFNLFdBQVcsSUFBSTtBQUUzQyxZQUFNLFFBQVEsSUFBSSxPQUFPLFNBQVMsaUJBQWlCLEdBQUc7QUFDdEQsVUFBSSxRQUFRLE1BQU0sS0FBSyxHQUFHO0FBQ3hCLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxlQUFlLFNBQWlCLFNBQStCO0FBQzdELFVBQU0sb0JBQW9CLFNBQVMsY0FBYyxPQUFPO0FBQ3hELFVBQU0sV0FBVyxTQUFTLGNBQWMsT0FBTztBQUMvQyxhQUFTLE9BQU87QUFDaEIsYUFBUyxVQUFVO0FBQ25CLHNCQUFrQixZQUFZLFFBQVE7QUFFdEMsYUFBUyxpQkFBaUIsVUFBVSxZQUFZO0FBQzlDLFdBQUssT0FBTyxTQUFTLFVBQVUsS0FBSyxPQUFPLFNBQVMsUUFBUTtBQUFBLFFBQUksQ0FBQyxXQUMvRCxPQUFPLFlBQVksVUFDZixFQUFFLEdBQUcsUUFBUSxZQUFZLFNBQVMsUUFBUSxJQUMxQztBQUFBLE1BQ047QUFFQSxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxNQUFNLGdCQUFnQjtBQUNwQixVQUFNLGtCQUFrQixLQUFLLE9BQU8sU0FBUyxRQUFRO0FBQUEsTUFDbkQsQ0FBQyxXQUFXLE9BQU87QUFBQSxJQUNyQjtBQUVBLFVBQU0sUUFBUSxLQUFLLE9BQU8sSUFBSTtBQUM5QixVQUFNLFFBQVEsTUFBTSxpQkFBaUI7QUFDckMsVUFBTSxhQUFhLE1BQU07QUFFekIsUUFBSSxhQUFhO0FBQ2pCLFVBQU0saUJBQWlCLG9CQUFJLElBQUk7QUFHL0IsZUFBVyxrQkFBa0IsaUJBQWlCO0FBQzVDLFlBQU0sRUFBRSxRQUFRLElBQUk7QUFDcEIsWUFBTSxlQUFlLGNBQWMsUUFBUSxRQUFRLHlCQUF5QixNQUFNO0FBQ2xGLHFCQUFlLElBQUksU0FBUyxJQUFJLE9BQU8sY0FBYyxHQUFHLENBQUM7QUFBQSxJQUMzRDtBQUVBLGVBQVcsUUFBUSxPQUFPO0FBQ3hCLFVBQUksQ0FBQyxLQUFLLFdBQVcsS0FBSyxJQUFJLEdBQUc7QUFDL0IsWUFBSSxVQUFVLE1BQU0sTUFBTSxLQUFLLElBQUk7QUFDbkMsWUFBSSxpQkFBaUI7QUFFckIsbUJBQVcsa0JBQWtCLGlCQUFpQjtBQUM1QyxnQkFBTSxFQUFFLFFBQVEsSUFBSTtBQUNwQixnQkFBTSxRQUFRLGVBQWUsSUFBSSxPQUFPO0FBQ3hDLGNBQUksT0FBTztBQUNULDZCQUFpQixlQUFlLFFBQVEsT0FBTyxLQUFLLFdBQVc7QUFBQSxVQUNqRTtBQUFBLFFBQ0Y7QUFFQSxZQUFJLG1CQUFtQixTQUFTO0FBQzlCLGdCQUFNLE1BQU0sT0FBTyxNQUFNLGNBQWM7QUFBQSxRQUN6QztBQUVBO0FBQ0EsYUFBSyxhQUFhLFlBQVksVUFBVTtBQUFBLE1BQzFDO0FBQUEsSUFDRjtBQUlBLFNBQUssT0FBTyxTQUFTLFVBQVUsS0FBSyxPQUFPLFNBQVMsUUFBUTtBQUFBLE1BQUksQ0FBQyxXQUMvRCxnQkFBZ0IsS0FBSyxDQUFDLEVBQUUsUUFBUSxNQUFNLE9BQU8sWUFBWSxPQUFPLElBQzVELEVBQUUsR0FBRyxRQUFRLFlBQVksTUFBTSxJQUMvQjtBQUFBLElBQ047QUFFQSxVQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFFBQUksdUJBQU8sa0JBQWtCO0FBQUEsRUFDL0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxXQUFXLE1BQXVCO0FBQ2hDLFFBQUksS0FBSyxPQUFPLFNBQVMsZ0NBQWdDO0FBQUksYUFBTztBQUVwRSxXQUFPLEtBQUssU0FBUyxLQUFLLE9BQU8sU0FBUyw0QkFBNEIsU0FBUyxDQUFDO0FBQUEsRUFDbEY7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sd0JBQXdCO0FBQzVCLFVBQU0sa0JBQWtCLEtBQUssT0FBTyxTQUFTLFFBQVE7QUFBQSxNQUNuRCxDQUFDLFdBQVcsT0FBTztBQUFBLElBQ3JCO0FBRUEsZUFBVyxrQkFBa0IsaUJBQWlCO0FBQzVDLFlBQU0sRUFBRSxRQUFRLElBQUk7QUFFcEIscUJBQWUsYUFBYTtBQUc1QixVQUNFLENBQUMsS0FBSyxPQUFPLFNBQVMsZUFBZTtBQUFBLFFBQ25DLENBQUMsbUJBQW1CLGVBQWUsWUFBWTtBQUFBLE1BQ2pELEdBQ0E7QUFDQSxhQUFLLE9BQU8sU0FBUyxlQUFlLEtBQUssY0FBYztBQUFBLE1BQ3pEO0FBQUEsSUFDRjtBQUdBLFNBQUssT0FBTyxTQUFTLFVBQVUsS0FBSyxPQUFPLFNBQVMsUUFBUTtBQUFBLE1BQzFELENBQUMsV0FBVyxDQUFDLE9BQU87QUFBQSxJQUN0QjtBQUVBLFVBQU0sS0FBSyxPQUFPLGFBQWE7QUFFL0IsVUFBTSxLQUFLLE9BQU8sc0JBQXNCO0FBQ3hDLFVBQU0sS0FBSyxRQUFRO0FBQUEsRUFDckI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sNEJBQTRCO0FBQ2hDLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFFeEIsVUFBTSx3QkFBd0IsSUFBSSx3QkFBUSxXQUFXLEVBQ2xELFFBQVEsc0JBQXNCLEVBQzlCLFFBQVEsa0NBQWtDO0FBRTdDLFVBQU0sc0JBQXNCLFlBQVksU0FBUyxTQUFTO0FBQUEsTUFDeEQsS0FBSztBQUFBLElBQ1AsQ0FBQztBQUVELFVBQU0sc0JBQXNCLG9CQUFvQixZQUFZO0FBQzVELFVBQU0sMEJBQTBCLG9CQUFvQixVQUFVO0FBQzlELDRCQUF3QixXQUFXLEVBQUUsY0FBYztBQUNuRCw0QkFBd0IsV0FBVyxFQUFFLGNBQWM7QUFDbkQsNEJBQXdCLFdBQVcsRUFBRSxjQUFjO0FBQ25ELDRCQUF3QixXQUFXLEVBQUUsY0FBYztBQUVuRCxVQUFNLG9CQUFvQixLQUFLLE9BQU8sU0FBUyxlQUFlO0FBQUEsTUFDNUQsQ0FBQyxHQUFHLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFBQSxJQUN4QjtBQUVBLFVBQU0sc0JBQXNCLG9CQUFvQixZQUFZO0FBQzVELGFBQVMsSUFBSSxHQUFHLElBQUksa0JBQWtCLFFBQVEsS0FBSztBQUNqRCxZQUFNLEVBQUUsU0FBUyxPQUFPLFdBQVcsSUFBSSxrQkFBa0IsQ0FBQztBQUUxRCxZQUFNLE1BQU0sb0JBQW9CLFVBQVU7QUFDMUMsVUFBSSxXQUFXLENBQUMsRUFBRSxlQUFlLElBQUksR0FBRyxTQUFTO0FBQ2pELFVBQUksV0FBVyxDQUFDLEVBQUUsY0FBYyxRQUFRLE1BQU0sU0FBUyxJQUFJO0FBQzNELFVBQUksV0FBVyxDQUFDLEVBQUUsY0FBYztBQUNoQyxVQUFJLFdBQVcsQ0FBQyxFQUFFO0FBQUEsUUFDaEIsS0FBSyxzQkFBc0IsU0FBUyxVQUFVO0FBQUEsTUFDaEQ7QUFBQSxJQUNGO0FBRUEsZ0JBQVksWUFBWSxtQkFBbUI7QUFFM0MsVUFBTSxlQUFlLFlBQVksU0FBUyxVQUFVO0FBQUEsTUFDbEQsTUFBTTtBQUFBLElBQ1IsQ0FBQztBQUNELGlCQUFhLGlCQUFpQixTQUFTLFlBQVk7QUFFakQsV0FBSyxzQkFBc0I7QUFBQSxJQUM3QixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsc0JBQXNCLFNBQWlCLFNBQStCO0FBQ3BFLFVBQU0sb0JBQW9CLFNBQVMsY0FBYyxPQUFPO0FBQ3hELFVBQU0sV0FBVyxTQUFTLGNBQWMsT0FBTztBQUMvQyxhQUFTLE9BQU87QUFDaEIsYUFBUyxVQUFVO0FBQ25CLHNCQUFrQixZQUFZLFFBQVE7QUFFdEMsYUFBUyxpQkFBaUIsVUFBVSxZQUFZO0FBQzlDLFdBQUssT0FBTyxTQUFTLGlCQUFpQixLQUFLLE9BQU8sU0FBUyxlQUFlO0FBQUEsUUFDeEUsQ0FBQyxtQkFDQyxlQUFlLFlBQVksVUFDdkIsRUFBRSxHQUFHLGdCQUFnQixZQUFZLFNBQVMsUUFBUSxJQUNsRDtBQUFBLE1BQ1I7QUFFQSxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQztBQUVELFdBQU87QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLHdCQUF3QjtBQUU1QixVQUFNLHlCQUF5QixLQUFLLE9BQU8sU0FBUyxlQUFlO0FBQUEsTUFDakUsQ0FBQyxtQkFBbUI7QUFDbEIsZUFBTyxlQUFlO0FBQUEsTUFDeEI7QUFBQSxJQUNGO0FBRUEsZUFBVyx5QkFBeUIsd0JBQXdCO0FBQzFELFlBQU0sRUFBRSxRQUFRLElBQUk7QUFHcEIsWUFBTSxRQUFRLEtBQUssT0FBTyxTQUFTLGVBQWU7QUFBQSxRQUNoRCxDQUFDLG1CQUFtQixlQUFlLFlBQVk7QUFBQSxNQUNqRDtBQUNBLFVBQUksVUFBVSxJQUFJO0FBQ2hCLGFBQUssT0FBTyxTQUFTLGVBQWUsT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNyRDtBQUFBLElBQ0Y7QUFFQSxVQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFVBQU0sS0FBSyxRQUFRO0FBQUEsRUFDckI7QUFBQSxFQUVBLE1BQU0sZ0NBQWdDO0FBQ3BDLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFFeEIsVUFBTSx1QkFBdUIsSUFBSSx3QkFBUSxXQUFXLEVBQ2pELFFBQVEscUJBQXFCLEVBQzdCLFFBQVEsaUdBQWlHO0FBRTVHLFVBQU0sNEJBQTRCLFlBQVksU0FBUyxVQUFVO0FBQUEsTUFDL0QsTUFBTTtBQUFBLElBQ1IsQ0FBQztBQUNELDhCQUEwQixpQkFBaUIsU0FBUyxZQUFZO0FBRTlELFdBQUssb0JBQW9CO0FBQUEsSUFDM0IsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLE1BQU0sc0JBQXNCO0FBQzFCLFVBQU0scUJBQXFCLEtBQUssWUFBWSxTQUFTLFNBQVM7QUFBQSxNQUM1RCxLQUFLO0FBQUEsSUFDUCxDQUFDO0FBRUQsVUFBTSxRQUFRLG1CQUFtQixZQUFZO0FBQzdDLFVBQU0sWUFBWSxNQUFNLFVBQVU7QUFDbEMsY0FBVSxXQUFXLEVBQUUsY0FBYztBQUNyQyxjQUFVLFdBQVcsRUFBRSxjQUFjO0FBQ3JDLGNBQVUsV0FBVyxFQUFFLGNBQWM7QUFDckMsY0FBVSxXQUFXLEVBQUUsY0FBYztBQUVyQyxVQUFNLGdCQUFnQixLQUFLLE9BQU8sU0FBUyxRQUN4QyxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUs7QUFFbkMsVUFBTSxRQUFRLG1CQUFtQixZQUFZO0FBQzdDLFVBQU0sWUFBWTtBQUVsQixVQUFNLGVBQWUsT0FBTyxlQUF1QjtBQUNqRCxZQUFNLGtCQUFrQixhQUFhO0FBQ3JDLFlBQU0sZ0JBQWdCLEtBQUs7QUFBQSxRQUN6QixrQkFBa0I7QUFBQSxRQUNsQixjQUFjO0FBQUEsTUFDaEI7QUFFQSxZQUFNLGdCQUFnQixDQUFDO0FBRXZCLGVBQVMsSUFBSSxpQkFBaUIsSUFBSSxlQUFlLEtBQUs7QUFDcEQsY0FBTSxFQUFFLFNBQVMsT0FBTyxXQUFXLElBQUksY0FBYyxDQUFDO0FBR3RELGNBQU0sa0JBQWtCLE1BQU0sS0FBSyxnQkFBZ0IsT0FBTztBQUUxRCxZQUFJLG1CQUFtQixDQUFDLEtBQUssVUFBVSxPQUFPLEdBQUc7QUFDL0MsZ0JBQU0sTUFBTSxNQUFNLFVBQVU7QUFDNUIsY0FBSSxXQUFXLEVBQUUsZUFBZSxJQUFJLEdBQUcsU0FBUztBQUNoRCxjQUFJLFdBQVcsRUFBRSxjQUFjLE1BQU0sU0FBUztBQUM5QyxjQUFJLFdBQVcsRUFBRSxjQUFjO0FBQy9CLGNBQUksV0FBVyxFQUFFLFlBQVksS0FBSyxlQUFlLFNBQVMsVUFBVSxDQUFDO0FBQUEsUUFDdkU7QUFBQSxNQUNGO0FBR0EsVUFBSSxnQkFBZ0IsY0FBYyxRQUFRO0FBQ3hDLHNCQUFjLEtBQUssYUFBYSxhQUFhLENBQUMsQ0FBQztBQUFBLE1BQ2pEO0FBRUEsWUFBTSxRQUFRLElBQUksYUFBYTtBQUFBLElBQ2pDO0FBR0EsVUFBTSxhQUFhLENBQUM7QUFHcEIsU0FBSyxZQUFZLFlBQVksa0JBQWtCO0FBRS9DLFVBQU0sZUFBZSxLQUFLLFlBQVksU0FBUyxVQUFVO0FBQUEsTUFDdkQsTUFBTTtBQUFBLElBQ1IsQ0FBQztBQUNELGlCQUFhLFVBQVUsSUFBSSxrQkFBa0I7QUFDN0MsaUJBQWEsTUFBTSxTQUFTO0FBQzVCLGlCQUFhLE1BQU0sYUFBYTtBQUNoQyxpQkFBYSxNQUFNLFlBQVk7QUFDL0IsaUJBQWEsaUJBQWlCLFNBQVMsWUFBWTtBQUVqRCxZQUFNLEtBQUssc0JBQXNCO0FBQUEsSUFDbkMsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLE1BQU0sd0JBQXdCO0FBQzVCLFVBQU0sa0JBQWtCLEtBQUssT0FBTyxTQUFTLFFBQVE7QUFBQSxNQUNuRCxDQUFDLFdBQVcsT0FBTztBQUFBLElBQ3JCO0FBR0EsVUFBTSxtQkFBbUIsSUFBSTtBQUFBLE1BQzNCLGdCQUFnQixJQUFJLENBQUMsV0FBVyxPQUFPLE9BQU87QUFBQSxJQUNoRDtBQUVBLFVBQU0sUUFBUSxLQUFLLElBQUk7QUFDdkIsVUFBTSxRQUFRLEtBQUssT0FBTyxTQUFTLGdDQUFnQyxLQUMvRCxNQUFNLGlCQUFpQixJQUN2QixNQUFNLGlCQUFpQixFQUFFLE9BQU8sVUFBUSxDQUFDLEtBQUssS0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLDRCQUE0QixTQUFTLENBQUMsQ0FBQztBQUU1SCxRQUFJLGFBQWE7QUFHakIsZUFBVyxRQUFRLE9BQU87QUFDeEIsVUFBSSxVQUFVLE1BQU0sTUFBTSxLQUFLLElBQUk7QUFDbkMsVUFBSSxXQUFXO0FBR2YsaUJBQVcsbUJBQW1CLGtCQUFrQjtBQUM5QyxjQUFNLFFBQVEsSUFBSTtBQUFBLFVBQ2hCLFNBQVM7QUFBQSxVQUNUO0FBQUEsUUFDRjtBQUVBLFlBQUksUUFBUSxNQUFNLEtBQUssR0FBRztBQUV4QixvQkFBVSxRQUFRLFFBQVEsT0FBTyxlQUFlO0FBQ2hELHFCQUFXO0FBQUEsUUFDYjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFVBQVU7QUFDWixjQUFNLE1BQU0sT0FBTyxNQUFNLE9BQU87QUFDaEM7QUFDQSxhQUFLLGFBQWEsWUFBWSxNQUFNLE1BQU07QUFBQSxNQUM1QztBQUFBLElBQ0Y7QUFHQSxTQUFLLE9BQU8sU0FBUyxVQUFVLEtBQUssT0FBTyxTQUFTLFFBQVE7QUFBQSxNQUMxRCxDQUFDLFdBQVcsQ0FBQyxPQUFPO0FBQUEsSUFDdEI7QUFFQSxVQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLFFBQUksdUJBQU8sd0NBQXdDO0FBQ25ELFVBQU0sS0FBSyxPQUFPLHNCQUFzQjtBQUN4QyxVQUFNLEtBQUssUUFBUTtBQUFBLEVBQ3JCO0FBQUEsRUFFQSxNQUFNLGFBQWEsWUFBb0IsYUFBcUI7QUFDMUQsUUFBSSxDQUFDLEtBQUssUUFBUTtBQUNoQixZQUFNLFVBQVUsYUFBYSxpQkFBaUI7QUFDOUMsV0FBSyxTQUFTLElBQUksdUJBQU8sT0FBTztBQUVoQyxpQkFBVyxNQUFNO0FBQ2YsYUFBSyxZQUFZO0FBQUEsTUFDbkIsR0FBRyxHQUFJO0FBQUEsSUFDVCxPQUFPO0FBQ0wsV0FBSyxPQUFPLFdBQVcsYUFBYSxpQkFBaUIsYUFBYTtBQUFBLElBQ3BFO0FBRUEsUUFBSSxlQUFlLGFBQWE7QUFDOUIsVUFBSSx1QkFBTyxrQkFBa0I7QUFDN0IsV0FBSyxZQUFZO0FBQUEsSUFDbkI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLGNBQWM7QUFDbEIsUUFBSSxLQUFLLFFBQVE7QUFDZixXQUFLLE9BQU8sS0FBSztBQUNqQixXQUFLLFNBQVM7QUFBQSxJQUNoQjtBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFtdCn0K
