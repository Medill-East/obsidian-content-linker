/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ContentLinkerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ContentLinkerPlugin = class extends import_obsidian.Plugin {
  /**
   * Plugin onload event handler.
   */
  async onload() {
    await this.loadSettings();
    console.log("Loading Content Linker plugin");
    this.addCommand({
      id: "search-possible-bi-directional-links",
      name: "Search possible bi-directional links in vault",
      callback: async () => {
        await this.searchPossibleBiLinks();
        await this.saveSettings();
      }
    });
    this.addSettingTab(new ContentLinkerSettingTab(this.app, this));
  }
  /**
   * Load plugin data from storage.
   */
  async loadSettings() {
    this.settings = Object.assign(
      {},
      {
        biLinks: [],
        optionsCount: 10,
        ignoredContent: [],
        relativePathOfExcludedNotes: ""
      },
      await this.loadData()
    );
  }
  /**
   * Save plugin data to storage.
   */
  async saveSettings() {
    this.saveData(this.settings);
  }
  /**
   * Search for possible bi-links in the vault.
   */
  /**
  * Search for possible bi-links in the vault.
  */
  async searchPossibleBiLinks() {
    const vault = this.app.vault;
    const { relativePathOfExcludedNotes, biLinks, ignoredContent } = this.settings;
    const isExcludedNote = (path) => relativePathOfExcludedNotes !== "" && path.includes(relativePathOfExcludedNotes);
    const notes = relativePathOfExcludedNotes === "" ? vault.getMarkdownFiles() : vault.getMarkdownFiles().filter((file) => !isExcludedNote(file.path));
    const existingBiLinks = /* @__PURE__ */ new Set();
    const potentialBiLinks = /* @__PURE__ */ new Map();
    const processNote = async (note) => {
      try {
        const content = await vault.cachedRead(note);
        const biLinkKeywords = content.match(/\[\[(.+?)\]\]/g) || [];
        const uniqueKeywords = content.match(/\b\w+\b/g) || [];
        for (const biLink of biLinkKeywords) {
          const keyword = biLink.slice(2, -2);
          existingBiLinks.add(keyword);
        }
        for (const keyword of uniqueKeywords) {
          if (!potentialBiLinks.has(keyword) && !biLinks.some((biLink) => biLink.keyword === keyword) && !existingBiLinks.has(keyword) && !content.includes(`[[${keyword}]]`) && !ignoredContent.some((ignored) => ignored.keyword === keyword)) {
            potentialBiLinks.set(keyword, 1);
          } else {
            potentialBiLinks.set(
              keyword,
              (potentialBiLinks.get(keyword) || 0) + 1
            );
          }
        }
      } catch (error) {
        console.error(`Error processing note: ${note.name}`, error);
      }
    };
    await Promise.all(notes.map(processNote));
    this.settings.biLinks = Array.from(potentialBiLinks.entries()).map(([keyword, count]) => ({
      keyword,
      count,
      isSelected: false
    }));
    await this.saveSettings();
    new import_obsidian.Notice("Search finished!");
  }
};
var ContentLinkerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.notice = null;
    this.plugin = plugin;
  }
  async display() {
    const { containerEl } = this;
    containerEl.empty();
    const relativePathExclusion = new import_obsidian.Setting(containerEl).setName("Relative path of excluded notes").setDesc("Enter a relative path:");
    relativePathExclusion.addText((input) => input.setPlaceholder("Relative path of exluded notes").setValue(this.plugin.settings.relativePathOfExcludedNotes.toString()).onChange(async (value) => {
      this.plugin.settings.relativePathOfExcludedNotes = value;
      await this.plugin.saveSettings();
    }));
    const searchButton = containerEl.createEl("button", {
      text: "Search possible bi-directional links in vault"
    });
    searchButton.addEventListener("click", async () => {
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    new import_obsidian.Setting(containerEl).setName("Possible bi-directional content").setDesc("Enter a number:").addText(
      (text) => text.setValue(this.plugin.settings.optionsCount.toString()).onChange(async (value) => {
        const parsedValue = parseFloat(value);
        if (!isNaN(parsedValue)) {
          this.plugin.settings.optionsCount = parsedValue;
        }
      })
    );
    const countButton = containerEl.createEl("button", {
      text: "Update number of search results"
    });
    countButton.addEventListener("click", async () => {
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    this.updateTableofPossibleBiDirectionalContentTable();
    const updateButton = containerEl.createEl("button", {
      text: "Update bi-directional link for selected option(s)"
    });
    updateButton.addEventListener("click", async () => {
      await this.updateBiLinks();
      await this.plugin.searchPossibleBiLinks();
      await this.display();
    });
    const ignoreButton = containerEl.createEl("button", {
      text: "Ignore selected option(s)"
    });
    ignoreButton.addEventListener("click", async () => {
      await this.ignoreSelectedOptions();
    });
    await this.displayIgnoredContentList();
    await this.displayBiDirectionalLinksList();
  }
  async updateTableofPossibleBiDirectionalContentTable() {
    const table = this.containerEl.createEl("table", { cls: "content-linker-table" });
    const thead = table.createTHead();
    const headerRow = thead.insertRow();
    headerRow.insertCell().textContent = "No.";
    headerRow.insertCell().textContent = "Count";
    headerRow.insertCell().textContent = "Keyword";
    headerRow.insertCell().textContent = "Selected";
    const sortedBiLinks = this.plugin.settings.biLinks.sort((a, b) => b.count - a.count).slice(0, this.plugin.settings.optionsCount);
    const tbody = table.createTBody();
    for (let index = 0; index < sortedBiLinks.length; index++) {
      const { keyword, count, isSelected } = sortedBiLinks[index];
      const isAlreadyBiLink = await this.isAlreadyBiLink(keyword);
      if (!isAlreadyBiLink && !this.isIgnored(keyword)) {
        const row = tbody.insertRow();
        row.insertCell().textContent = (index + 1).toString();
        row.insertCell().textContent = count.toString();
        row.insertCell().textContent = keyword;
        row.insertCell().appendChild(this.createCheckbox(keyword, isSelected));
      }
    }
  }
  /**
   * Check if a keyword is ignored.
   * @param keyword - The keyword to check.
   * @returns True if ignored, false otherwise.
   */
  isIgnored(keyword) {
    return this.plugin.settings.ignoredContent.some(
      (ignoredContent) => ignoredContent.keyword === keyword
    );
  }
  /**
   * Check if a keyword is already a bi-link in any note.
   * @param keyword - The keyword to check.
   * @returns True if it is already a bi-link, false otherwise.
   */
  async isAlreadyBiLink(keyword) {
    const vault = this.plugin.app.vault;
    const notes = vault.getMarkdownFiles();
    for (const note of notes) {
      const content = await vault.cachedRead(note);
      const regex = new RegExp(`\\[\\[${keyword}\\]\\]`, "g");
      if (content.match(regex)) {
        return true;
      }
    }
    return false;
  }
  /**
   * Create a checkbox element for a bi-link option.
   * @param keyword - The keyword for the bi-link.
   * @param checked - Whether the checkbox is selected.
   * @returns The created checkbox element.
   */
  createCheckbox(keyword, checked) {
    const checkboxContainer = document.createElement("label");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = checked;
    checkboxContainer.appendChild(checkbox);
    checkbox.addEventListener("change", async () => {
      this.plugin.settings.biLinks = this.plugin.settings.biLinks.map(
        (biLink) => biLink.keyword === keyword ? { ...biLink, isSelected: checkbox.checked } : biLink
      );
      await this.plugin.saveSettings();
    });
    return checkboxContainer;
  }
  async updateBiLinks() {
    const selectedBiLinks = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    const vault = this.plugin.app.vault;
    const notes = vault.getMarkdownFiles();
    const totalNotes = notes.length;
    let indexCount = 0;
    const keywordToRegex = /* @__PURE__ */ new Map();
    for (const selectedBiLink of selectedBiLinks) {
      const { keyword } = selectedBiLink;
      const regexPattern = `\\b${keyword.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&")}\\b`;
      keywordToRegex.set(keyword, new RegExp(regexPattern, "g"));
    }
    for (const note of notes) {
      if (!this.isExcluded(note.path)) {
        let content = await vault.read(note);
        let updatedContent = content;
        for (const selectedBiLink of selectedBiLinks) {
          const { keyword } = selectedBiLink;
          const regex = keywordToRegex.get(keyword);
          if (regex) {
            updatedContent = updatedContent.replace(regex, `[[${keyword}]]`);
          }
        }
        if (updatedContent !== content) {
          await vault.modify(note, updatedContent);
        }
        indexCount++;
        this.showProgress(indexCount, totalNotes);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.map(
      (biLink) => selectedBiLinks.some(({ keyword }) => biLink.keyword === keyword) ? { ...biLink, isSelected: false } : biLink
    );
    await this.plugin.saveSettings();
    new import_obsidian.Notice("Update finished!");
  }
  /**
   * Check if a note path is excluded.
   * @param path - The path of the note.
   * @returns True if the note path is excluded, false otherwise.
   */
  isExcluded(path) {
    if (this.plugin.settings.relativePathOfExcludedNotes === "")
      return false;
    return path.includes(this.plugin.settings.relativePathOfExcludedNotes.toString());
  }
  /**
   * Ignore the selected bi-link options.
   */
  async ignoreSelectedOptions() {
    const selectedOptions = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    for (const selectedOption of selectedOptions) {
      const { keyword } = selectedOption;
      selectedOption.isSelected = false;
      if (!this.plugin.settings.ignoredContent.some(
        (ignoredContent) => ignoredContent.keyword === keyword
      )) {
        this.plugin.settings.ignoredContent.push(selectedOption);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.filter(
      (biLink) => !biLink.isSelected
    );
    await this.plugin.saveSettings();
    await this.plugin.searchPossibleBiLinks();
    await this.display();
  }
  /**
   * Display the ignored content list.
   */
  async displayIgnoredContentList() {
    const { containerEl } = this;
    const ignoredContentSetting = new import_obsidian.Setting(containerEl).setName("Ignored content list").setDesc("Keywords that you want to ignore");
    const ignoredContentTable = containerEl.createEl("table", {
      cls: "content-linker-ignored-content-table"
    });
    const ignoredContentThead = ignoredContentTable.createTHead();
    const ignoredContentHeaderRow = ignoredContentThead.insertRow();
    ignoredContentHeaderRow.insertCell().textContent = "No.";
    ignoredContentHeaderRow.insertCell().textContent = "Count";
    ignoredContentHeaderRow.insertCell().textContent = "Keyword";
    ignoredContentHeaderRow.insertCell().textContent = "Selected";
    const sortedIgnoredList = this.plugin.settings.ignoredContent.sort(
      (a, b) => b.count - a.count
    );
    const ignoredContentTbody = ignoredContentTable.createTBody();
    for (let i = 0; i < sortedIgnoredList.length; i++) {
      const { keyword, count, isSelected } = sortedIgnoredList[i];
      const row = ignoredContentTbody.insertRow();
      row.insertCell(0).textContent = (i + 1).toString();
      row.insertCell(1).textContent = count ? count.toString() : "";
      row.insertCell(2).textContent = keyword;
      row.insertCell(3).appendChild(
        this.createIgnoredCheckbox(keyword, isSelected)
      );
    }
    containerEl.appendChild(ignoredContentTable);
    const removeButton = containerEl.createEl("button", {
      text: "Remove selected option(s) from ignored content list"
    });
    removeButton.addEventListener("click", async () => {
      this.removeFromIgnoredList();
    });
  }
  /**
   * Create a checkbox element for an ignored option.
   * @param keyword - The keyword for the ignored option.
   * @param checked - Whether the checkbox is selected.
   * @returns The created checkbox element.
   */
  createIgnoredCheckbox(keyword, checked) {
    const checkboxContainer = document.createElement("label");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = checked;
    checkboxContainer.appendChild(checkbox);
    checkbox.addEventListener("change", async () => {
      this.plugin.settings.ignoredContent = this.plugin.settings.ignoredContent.map(
        (ignoredContent) => ignoredContent.keyword === keyword ? { ...ignoredContent, isSelected: checkbox.checked } : ignoredContent
      );
      await this.plugin.saveSettings();
    });
    return checkboxContainer;
  }
  /**
   * Remove the selected options from the ignored content list.
   */
  async removeFromIgnoredList() {
    const selectedIgnoredOptions = this.plugin.settings.ignoredContent.filter(
      (ignoredContent) => {
        return ignoredContent.isSelected;
      }
    );
    for (const selectedIgnoredOption of selectedIgnoredOptions) {
      const { keyword } = selectedIgnoredOption;
      const index = this.plugin.settings.ignoredContent.findIndex(
        (ignoredContent) => ignoredContent.keyword === keyword
      );
      if (index !== -1) {
        this.plugin.settings.ignoredContent.splice(index, 1);
      }
    }
    await this.plugin.saveSettings();
    await this.display();
  }
  async displayBiDirectionalLinksList() {
    const { containerEl } = this;
    const linkedContentSetting = new import_obsidian.Setting(containerEl).setName("Linked content list").setDesc("Content that is already bi-directional-linked. Count including non-bi-directional-linked format");
    const searchLinkedContentButton = containerEl.createEl("button", {
      text: "Search linked content in valut (May take long time if vault is big)"
    });
    searchLinkedContentButton.addEventListener("click", async () => {
      this.searchLinkedContent();
    });
  }
  async searchLinkedContent() {
    const linkedContentTable = this.containerEl.createEl("table", {
      cls: "content-linker-linked-content-table"
    });
    const thead = linkedContentTable.createTHead();
    const headerRow = thead.insertRow();
    headerRow.insertCell().textContent = "No.";
    headerRow.insertCell().textContent = "Count";
    headerRow.insertCell().textContent = "Keyword";
    headerRow.insertCell().textContent = "Selected";
    const sortedBiLinks = this.plugin.settings.biLinks.sort((a, b) => b.count - a.count);
    const tbody = linkedContentTable.createTBody();
    const batchSize = 100;
    const processBatch = async (batchIndex) => {
      const batchStartIndex = batchIndex * batchSize;
      const batchEndIndex = Math.min(
        batchStartIndex + batchSize,
        sortedBiLinks.length
      );
      const batchPromises = [];
      for (let i = batchStartIndex; i < batchEndIndex; i++) {
        const { keyword, count, isSelected } = sortedBiLinks[i];
        const isAlreadyBiLink = await this.isAlreadyBiLink(keyword);
        if (isAlreadyBiLink && !this.isIgnored(keyword)) {
          const row = tbody.insertRow();
          row.insertCell().textContent = (i + 1).toString();
          row.insertCell().textContent = count.toString();
          row.insertCell().textContent = keyword;
          row.insertCell().appendChild(this.createCheckbox(keyword, isSelected));
        }
      }
      if (batchEndIndex < sortedBiLinks.length) {
        batchPromises.push(processBatch(batchIndex + 1));
      }
      await Promise.all(batchPromises);
    };
    await processBatch(0);
    this.containerEl.appendChild(linkedContentTable);
    const removeButton = this.containerEl.createEl("button", {
      text: "Remove bi-directional links for selected option(s)\nAfter clicking the button, the setting page will be refreshed"
    });
    removeButton.classList.add("multiline-button");
    removeButton.style.height = "auto";
    removeButton.style.whiteSpace = "pre-line";
    removeButton.style.textAlign = "left";
    removeButton.addEventListener("click", async () => {
      await this.removeSelectedBiLinks();
    });
  }
  async removeSelectedBiLinks() {
    const selectedBiLinks = this.plugin.settings.biLinks.filter(
      (biLink) => biLink.isSelected
    );
    const selectedKeywords = new Set(
      selectedBiLinks.map((biLink) => biLink.keyword)
    );
    const vault = this.app.vault;
    const notes = this.plugin.settings.relativePathOfExcludedNotes === "" ? vault.getMarkdownFiles() : vault.getMarkdownFiles().filter((file) => !file.path.includes(this.plugin.settings.relativePathOfExcludedNotes.toString()));
    let indexCount = 0;
    for (const note of notes) {
      let content = await vault.read(note);
      let modified = false;
      for (const selectedKeyword of selectedKeywords) {
        const regex = new RegExp(
          `\\[\\[${selectedKeyword}\\]\\]`,
          "g"
        );
        if (content.match(regex)) {
          content = content.replace(regex, selectedKeyword);
          modified = true;
        }
      }
      if (modified) {
        await vault.modify(note, content);
        indexCount++;
        this.showProgress(indexCount, notes.length);
      }
    }
    this.plugin.settings.biLinks = this.plugin.settings.biLinks.filter(
      (biLink) => !biLink.isSelected
    );
    await this.plugin.saveSettings();
    new import_obsidian.Notice("Selected bi-directional links removed!");
    await this.plugin.searchPossibleBiLinks();
    await this.display();
  }
  async showProgress(indexCount, totalNumber) {
    if (!this.notice) {
      const message = `Updating: ${indexCount} of ${totalNumber}`;
      this.notice = new import_obsidian.Notice(message);
      setTimeout(() => {
        this.closeNotice();
      }, 3e3);
    } else {
      this.notice.setMessage(`Updating: ${indexCount} of ${totalNumber}`);
    }
    if (indexCount === totalNumber) {
      new import_obsidian.Notice("Updating finish!");
      this.closeNotice();
    }
  }
  async closeNotice() {
    if (this.notice) {
      this.notice.hide();
      this.notice = null;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgQmlMaW5rIHtcclxuICBrZXl3b3JkOiBzdHJpbmc7XHJcbiAgY291bnQ6IG51bWJlcjtcclxuICBpc1NlbGVjdGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSWdub3JlZENvbnRlbnQge1xyXG4gIGtleXdvcmQ6IHN0cmluZztcclxuICBjb3VudDogbnVtYmVyO1xyXG4gIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb250ZW50TGlua2VyUGx1Z2luU2V0dGluZ3Mge1xyXG4gIGJpTGlua3M6IEJpTGlua1tdO1xyXG4gIG9wdGlvbnNDb3VudDogbnVtYmVyO1xyXG4gIGlnbm9yZWRDb250ZW50OiBJZ25vcmVkQ29udGVudFtdO1xyXG4gIHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3Rlczogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZW50TGlua2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHJcbiAgc2V0dGluZ3M6IENvbnRlbnRMaW5rZXJQbHVnaW5TZXR0aW5ncztcclxuXHJcbiAgLyoqXHJcbiAgICogUGx1Z2luIG9ubG9hZCBldmVudCBoYW5kbGVyLlxyXG4gICAqL1xyXG4gIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgQ29udGVudCBMaW5rZXIgcGx1Z2luJyk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdzZWFyY2gtcG9zc2libGUtYmktZGlyZWN0aW9uYWwtbGlua3MnLFxyXG4gICAgICBuYW1lOiAnU2VhcmNoIHBvc3NpYmxlIGJpLWRpcmVjdGlvbmFsIGxpbmtzIGluIHZhdWx0JyxcclxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7IC8vIFNhdmUgZGF0YSBhZnRlciBtYWtpbmcgY2hhbmdlc1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBDb250ZW50TGlua2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZCBwbHVnaW4gZGF0YSBmcm9tIHN0b3JhZ2UuXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgIHt9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYmlMaW5rczogW10sXHJcbiAgICAgICAgb3B0aW9uc0NvdW50OiAxMCxcclxuICAgICAgICBpZ25vcmVkQ29udGVudDogW10sXHJcbiAgICAgICAgcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzOiAnJyxcclxuICAgICAgfSxcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZSBwbHVnaW4gZGF0YSB0byBzdG9yYWdlLlxyXG4gICAqL1xyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgIHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWFyY2ggZm9yIHBvc3NpYmxlIGJpLWxpbmtzIGluIHRoZSB2YXVsdC5cclxuICAgKi9cclxuICAvKipcclxuICogU2VhcmNoIGZvciBwb3NzaWJsZSBiaS1saW5rcyBpbiB0aGUgdmF1bHQuXHJcbiAqL1xyXG5hc3luYyBzZWFyY2hQb3NzaWJsZUJpTGlua3MoKSB7XHJcbiAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcclxuICBjb25zdCB7IHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3RlcywgYmlMaW5rcywgaWdub3JlZENvbnRlbnQgfSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgY29uc3QgaXNFeGNsdWRlZE5vdGUgPSAocGF0aDogc3RyaW5nKSA9PlxyXG4gICAgcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzICE9PSAnJyAmJiBwYXRoLmluY2x1ZGVzKHJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3Rlcyk7XHJcblxyXG4gIGNvbnN0IG5vdGVzID0gcmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzID09PSAnJ1xyXG4gICAgPyB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcclxuICAgIDogdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcigoZmlsZSkgPT4gIWlzRXhjbHVkZWROb3RlKGZpbGUucGF0aCkpO1xyXG5cclxuICBjb25zdCBleGlzdGluZ0JpTGlua3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICBjb25zdCBwb3RlbnRpYWxCaUxpbmtzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcclxuXHJcbiAgY29uc3QgcHJvY2Vzc05vdGUgPSBhc3luYyAobm90ZTogVEZpbGUpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKG5vdGUpO1xyXG4gICAgICBjb25zdCBiaUxpbmtLZXl3b3JkcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyguKz8pXFxdXFxdL2cpIHx8IFtdO1xyXG4gICAgICBjb25zdCB1bmlxdWVLZXl3b3JkcyA9IGNvbnRlbnQubWF0Y2goL1xcYlxcdytcXGIvZykgfHwgW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IGJpTGluayBvZiBiaUxpbmtLZXl3b3Jkcykge1xyXG4gICAgICAgIGNvbnN0IGtleXdvcmQgPSBiaUxpbmsuc2xpY2UoMiwgLTIpO1xyXG4gICAgICAgIGV4aXN0aW5nQmlMaW5rcy5hZGQoa2V5d29yZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3Qga2V5d29yZCBvZiB1bmlxdWVLZXl3b3Jkcykge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFwb3RlbnRpYWxCaUxpbmtzLmhhcyhrZXl3b3JkKSAmJlxyXG4gICAgICAgICAgIWJpTGlua3Muc29tZSgoYmlMaW5rKSA9PiBiaUxpbmsua2V5d29yZCA9PT0ga2V5d29yZCkgJiZcclxuICAgICAgICAgICFleGlzdGluZ0JpTGlua3MuaGFzKGtleXdvcmQpICYmXHJcbiAgICAgICAgICAhY29udGVudC5pbmNsdWRlcyhgW1ske2tleXdvcmR9XV1gKSAmJlxyXG4gICAgICAgICAgIWlnbm9yZWRDb250ZW50LnNvbWUoKGlnbm9yZWQpID0+IGlnbm9yZWQua2V5d29yZCA9PT0ga2V5d29yZClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHBvdGVudGlhbEJpTGlua3Muc2V0KGtleXdvcmQsIDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwb3RlbnRpYWxCaUxpbmtzLnNldChcclxuICAgICAgICAgICAga2V5d29yZCxcclxuICAgICAgICAgICAgKHBvdGVudGlhbEJpTGlua3MuZ2V0KGtleXdvcmQpIHx8IDApICsgMVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3Npbmcgbm90ZTogJHtub3RlLm5hbWV9YCwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGF3YWl0IFByb21pc2UuYWxsKG5vdGVzLm1hcChwcm9jZXNzTm90ZSkpO1xyXG5cclxuICB0aGlzLnNldHRpbmdzLmJpTGlua3MgPSBBcnJheS5mcm9tKHBvdGVudGlhbEJpTGlua3MuZW50cmllcygpKVxyXG4gICAgLm1hcCgoW2tleXdvcmQsIGNvdW50XSkgPT4gKHtcclxuICAgICAga2V5d29yZCxcclxuICAgICAgY291bnQsXHJcbiAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxyXG4gICAgfSkpO1xyXG5cclxuICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuICBuZXcgTm90aWNlKCdTZWFyY2ggZmluaXNoZWQhJyk7XHJcbn1cclxuXHJcbn1cclxuXHJcbmNsYXNzIENvbnRlbnRMaW5rZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBDb250ZW50TGlua2VyUGx1Z2luO1xyXG4gIHByaXZhdGUgbm90aWNlOiBOb3RpY2UgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQ29udGVudExpbmtlclBsdWdpbikge1xyXG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNwbGF5KCkge1xyXG5cclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAvLyBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdFeGNsdWRlIG5vdGVzIHdpdGggcmVsYXRpdmUgcGF0aCcgfSk7XHJcbiAgICBjb25zdCByZWxhdGl2ZVBhdGhFeGNsdXNpb24gPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1JlbGF0aXZlIHBhdGggb2YgZXhjbHVkZWQgbm90ZXMnKVxyXG4gICAgICAuc2V0RGVzYygnRW50ZXIgYSByZWxhdGl2ZSBwYXRoOicpXHJcbiAgICByZWxhdGl2ZVBhdGhFeGNsdXNpb24uYWRkVGV4dChpbnB1dCA9PiBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1JlbGF0aXZlIHBhdGggb2YgZXhsdWRlZCBub3RlcycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZVBhdGhPZkV4Y2x1ZGVkTm90ZXMudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3RlcyA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG5cclxuICAgIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgIHRleHQ6ICdTZWFyY2ggcG9zc2libGUgYmktZGlyZWN0aW9uYWwgbGlua3MgaW4gdmF1bHQnLFxyXG4gICAgfSk7XHJcbiAgICBzZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgICBhd2FpdCB0aGlzLmRpc3BsYXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnUG9zc2libGUgYmktZGlyZWN0aW9uYWwgY29udGVudCcpXHJcbiAgICAgIC5zZXREZXNjKCdFbnRlciBhIG51bWJlcjonKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3B0aW9uc0NvdW50LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3B0aW9uc0NvdW50ID0gcGFyc2VkVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgY29uc3QgY291bnRCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnVXBkYXRlIG51bWJlciBvZiBzZWFyY2ggcmVzdWx0cycsXHJcbiAgICB9KTtcclxuICAgIGNvdW50QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zZWFyY2hQb3NzaWJsZUJpTGlua3MoKTtcclxuICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVRhYmxlb2ZQb3NzaWJsZUJpRGlyZWN0aW9uYWxDb250ZW50VGFibGUoKTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnVXBkYXRlIGJpLWRpcmVjdGlvbmFsIGxpbmsgZm9yIHNlbGVjdGVkIG9wdGlvbihzKScsXHJcbiAgICB9KTtcclxuICAgIHVwZGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVCaUxpbmtzKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgICBhd2FpdCB0aGlzLmRpc3BsYXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGlnbm9yZUJ1dHRvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgIHRleHQ6ICdJZ25vcmUgc2VsZWN0ZWQgb3B0aW9uKHMpJyxcclxuICAgIH0pO1xyXG4gICAgaWdub3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCB0aGlzLmlnbm9yZVNlbGVjdGVkT3B0aW9ucygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5SWdub3JlZENvbnRlbnRMaXN0KCk7XHJcbiAgICBhd2FpdCB0aGlzLmRpc3BsYXlCaURpcmVjdGlvbmFsTGlua3NMaXN0KCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVUYWJsZW9mUG9zc2libGVCaURpcmVjdGlvbmFsQ29udGVudFRhYmxlKClcclxuICB7XHJcbiAgICBjb25zdCB0YWJsZSA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdjb250ZW50LWxpbmtlci10YWJsZScgfSk7XHJcblxyXG4gICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVUSGVhZCgpO1xyXG4gICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuaW5zZXJ0Um93KCk7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ05vLic7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ0NvdW50JztcclxuICAgIGhlYWRlclJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnS2V5d29yZCc7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ1NlbGVjdGVkJztcclxuXHJcbiAgICBjb25zdCBzb3J0ZWRCaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rc1xyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpXHJcbiAgICAgIC5zbGljZSgwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcHRpb25zQ291bnQpO1xyXG5cclxuICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzb3J0ZWRCaUxpbmtzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBjb25zdCB7IGtleXdvcmQsIGNvdW50LCBpc1NlbGVjdGVkIH0gPSBzb3J0ZWRCaUxpbmtzW2luZGV4XTtcclxuXHJcbiAgICAgIGNvbnN0IGlzQWxyZWFkeUJpTGluayA9IGF3YWl0IHRoaXMuaXNBbHJlYWR5QmlMaW5rKGtleXdvcmQpO1xyXG5cclxuICAgICAgaWYgKCFpc0FscmVhZHlCaUxpbmsgJiYgIXRoaXMuaXNJZ25vcmVkKGtleXdvcmQpKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuaW5zZXJ0Um93KCk7XHJcbiAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IChpbmRleCArIDEpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGNvdW50LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGtleXdvcmQ7XHJcbiAgICAgICAgcm93Lmluc2VydENlbGwoKS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUNoZWNrYm94KGtleXdvcmQsIGlzU2VsZWN0ZWQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgYSBrZXl3b3JkIGlzIGlnbm9yZWQuXHJcbiAgICogQHBhcmFtIGtleXdvcmQgLSBUaGUga2V5d29yZCB0byBjaGVjay5cclxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGlnbm9yZWQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgKi9cclxuICBpc0lnbm9yZWQoa2V5d29yZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuc29tZShcclxuICAgICAgKGlnbm9yZWRDb250ZW50KSA9PiBpZ25vcmVkQ29udGVudC5rZXl3b3JkID09PSBrZXl3b3JkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgYSBrZXl3b3JkIGlzIGFscmVhZHkgYSBiaS1saW5rIGluIGFueSBub3RlLlxyXG4gICAqIEBwYXJhbSBrZXl3b3JkIC0gVGhlIGtleXdvcmQgdG8gY2hlY2suXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBpdCBpcyBhbHJlYWR5IGEgYmktbGluaywgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIGFzeW5jIGlzQWxyZWFkeUJpTGluayhrZXl3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0O1xyXG4gICAgY29uc3Qgbm90ZXMgPSB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XHJcblxyXG4gICAgZm9yIChjb25zdCBub3RlIG9mIG5vdGVzKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKG5vdGUpO1xyXG5cclxuICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBcXFxcW1xcXFxbJHtrZXl3b3JkfVxcXFxdXFxcXF1gLCAnZycpO1xyXG4gICAgICBpZiAoY29udGVudC5tYXRjaChyZWdleCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSBhIGNoZWNrYm94IGVsZW1lbnQgZm9yIGEgYmktbGluayBvcHRpb24uXHJcbiAgICogQHBhcmFtIGtleXdvcmQgLSBUaGUga2V5d29yZCBmb3IgdGhlIGJpLWxpbmsuXHJcbiAgICogQHBhcmFtIGNoZWNrZWQgLSBXaGV0aGVyIHRoZSBjaGVja2JveCBpcyBzZWxlY3RlZC5cclxuICAgKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBjaGVja2JveCBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGNyZWF0ZUNoZWNrYm94KGtleXdvcmQ6IHN0cmluZywgY2hlY2tlZDogYm9vbGVhbik6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGNoZWNrYm94Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xyXG4gICAgY2hlY2tib3guY2hlY2tlZCA9IGNoZWNrZWQ7XHJcbiAgICBjaGVja2JveENvbnRhaW5lci5hcHBlbmRDaGlsZChjaGVja2JveCk7XHJcblxyXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcy5tYXAoKGJpTGluaykgPT5cclxuICAgICAgICBiaUxpbmsua2V5d29yZCA9PT0ga2V5d29yZFxyXG4gICAgICAgICAgPyB7IC4uLmJpTGluaywgaXNTZWxlY3RlZDogY2hlY2tib3guY2hlY2tlZCB9XHJcbiAgICAgICAgICA6IGJpTGlua1xyXG4gICAgICApO1xyXG5cclxuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY2hlY2tib3hDb250YWluZXI7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVCaUxpbmtzKCkge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRCaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcy5maWx0ZXIoXHJcbiAgICAgIChiaUxpbmspID0+IGJpTGluay5pc1NlbGVjdGVkXHJcbiAgICApO1xyXG4gIFxyXG4gICAgY29uc3QgdmF1bHQgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQ7XHJcbiAgICBjb25zdCBub3RlcyA9IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgIGNvbnN0IHRvdGFsTm90ZXMgPSBub3Rlcy5sZW5ndGg7XHJcbiAgXHJcbiAgICBsZXQgaW5kZXhDb3VudCA9IDA7XHJcbiAgICBjb25zdCBrZXl3b3JkVG9SZWdleCA9IG5ldyBNYXAoKTtcclxuICBcclxuICAgIC8vIENyZWF0ZSBhIG1hcHBpbmcgb2Ygc2VsZWN0ZWQga2V5d29yZHMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyByZWdleCBwYXR0ZXJuc1xyXG4gICAgZm9yIChjb25zdCBzZWxlY3RlZEJpTGluayBvZiBzZWxlY3RlZEJpTGlua3MpIHtcclxuICAgICAgY29uc3QgeyBrZXl3b3JkIH0gPSBzZWxlY3RlZEJpTGluaztcclxuICAgICAgY29uc3QgcmVnZXhQYXR0ZXJuID0gYFxcXFxiJHtrZXl3b3JkLnJlcGxhY2UoL1stL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKX1cXFxcYmA7XHJcbiAgICAgIGtleXdvcmRUb1JlZ2V4LnNldChrZXl3b3JkLCBuZXcgUmVnRXhwKHJlZ2V4UGF0dGVybiwgJ2cnKSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBmb3IgKGNvbnN0IG5vdGUgb2Ygbm90ZXMpIHtcclxuICAgICAgaWYgKCF0aGlzLmlzRXhjbHVkZWQobm90ZS5wYXRoKSkge1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChub3RlKTtcclxuICAgICAgICBsZXQgdXBkYXRlZENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEJpTGluayBvZiBzZWxlY3RlZEJpTGlua3MpIHtcclxuICAgICAgICAgIGNvbnN0IHsga2V5d29yZCB9ID0gc2VsZWN0ZWRCaUxpbms7XHJcbiAgICAgICAgICBjb25zdCByZWdleCA9IGtleXdvcmRUb1JlZ2V4LmdldChrZXl3b3JkKTtcclxuICAgICAgICAgIGlmIChyZWdleCkge1xyXG4gICAgICAgICAgICB1cGRhdGVkQ29udGVudCA9IHVwZGF0ZWRDb250ZW50LnJlcGxhY2UocmVnZXgsIGBbWyR7a2V5d29yZH1dXWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGlmICh1cGRhdGVkQ29udGVudCAhPT0gY29udGVudCkge1xyXG4gICAgICAgICAgYXdhaXQgdmF1bHQubW9kaWZ5KG5vdGUsIHVwZGF0ZWRDb250ZW50KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpbmRleENvdW50Kys7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3MoaW5kZXhDb3VudCwgdG90YWxOb3Rlcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gIFxyXG4gICAgLy8gVXBkYXRlIHRoZSBpc1NlbGVjdGVkIHN0YXR1cyBmb3Igc2VsZWN0ZWQgYmktbGlua3NcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzLm1hcCgoYmlMaW5rKSA9PlxyXG4gICAgICBzZWxlY3RlZEJpTGlua3Muc29tZSgoeyBrZXl3b3JkIH0pID0+IGJpTGluay5rZXl3b3JkID09PSBrZXl3b3JkKVxyXG4gICAgICAgID8geyAuLi5iaUxpbmssIGlzU2VsZWN0ZWQ6IGZhbHNlIH1cclxuICAgICAgICA6IGJpTGlua1xyXG4gICAgKTtcclxuICBcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gIFxyXG4gICAgbmV3IE5vdGljZSgnVXBkYXRlIGZpbmlzaGVkIScpO1xyXG4gIH1cclxuICBcclxuICBcclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhIG5vdGUgcGF0aCBpcyBleGNsdWRlZC5cclxuICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBwYXRoIG9mIHRoZSBub3RlLlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIG5vdGUgcGF0aCBpcyBleGNsdWRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAqL1xyXG4gIGlzRXhjbHVkZWQocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzID09PSAnJykgcmV0dXJuIGZhbHNlO1xyXG4gIFxyXG4gICAgcmV0dXJuIHBhdGguaW5jbHVkZXModGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzLnRvU3RyaW5nKCkpO1xyXG4gIH1cclxuICBcclxuXHJcbiAgLyoqXHJcbiAgICogSWdub3JlIHRoZSBzZWxlY3RlZCBiaS1saW5rIG9wdGlvbnMuXHJcbiAgICovXHJcbiAgYXN5bmMgaWdub3JlU2VsZWN0ZWRPcHRpb25zKCkge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcy5maWx0ZXIoXHJcbiAgICAgIChiaUxpbmspID0+IGJpTGluay5pc1NlbGVjdGVkXHJcbiAgICApO1xyXG5cclxuICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRPcHRpb24gb2Ygc2VsZWN0ZWRPcHRpb25zKSB7XHJcbiAgICAgIGNvbnN0IHsga2V5d29yZCB9ID0gc2VsZWN0ZWRPcHRpb247XHJcbiAgICAgIC8vIHNldCB0aGUgaXNTZWxlY3RlZCBzdGF0dXMgdG8gZmFsc2VcclxuICAgICAgc2VsZWN0ZWRPcHRpb24uaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gYWRkIHNlbGVjdGVkIG9wdGlvbnMgdG8gaWdub3JlZCBsaXN0XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuc29tZShcclxuICAgICAgICAgIChpZ25vcmVkQ29udGVudCkgPT4gaWdub3JlZENvbnRlbnQua2V5d29yZCA9PT0ga2V5d29yZFxyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQucHVzaChzZWxlY3RlZE9wdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgdGhlIHNlbGVjdGVkIG9wdGlvbnMgZnJvbSB0aGUgYmktbGlua3MgYXJyYXlcclxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJpTGlua3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzLmZpbHRlcihcclxuICAgICAgKGJpTGluaykgPT4gIWJpTGluay5pc1NlbGVjdGVkXHJcbiAgICApO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaXNwbGF5IHRoZSBpZ25vcmVkIGNvbnRlbnQgbGlzdC5cclxuICAgKi9cclxuICBhc3luYyBkaXNwbGF5SWdub3JlZENvbnRlbnRMaXN0KCkge1xyXG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICBjb25zdCBpZ25vcmVkQ29udGVudFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ0lnbm9yZWQgY29udGVudCBsaXN0JylcclxuICAgICAgLnNldERlc2MoJ0tleXdvcmRzIHRoYXQgeW91IHdhbnQgdG8gaWdub3JlJyk7XHJcblxyXG4gICAgY29uc3QgaWdub3JlZENvbnRlbnRUYWJsZSA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCd0YWJsZScsIHtcclxuICAgICAgY2xzOiAnY29udGVudC1saW5rZXItaWdub3JlZC1jb250ZW50LXRhYmxlJyxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGlnbm9yZWRDb250ZW50VGhlYWQgPSBpZ25vcmVkQ29udGVudFRhYmxlLmNyZWF0ZVRIZWFkKCk7XHJcbiAgICBjb25zdCBpZ25vcmVkQ29udGVudEhlYWRlclJvdyA9IGlnbm9yZWRDb250ZW50VGhlYWQuaW5zZXJ0Um93KCk7XHJcbiAgICBpZ25vcmVkQ29udGVudEhlYWRlclJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnTm8uJztcclxuICAgIGlnbm9yZWRDb250ZW50SGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdDb3VudCc7XHJcbiAgICBpZ25vcmVkQ29udGVudEhlYWRlclJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnS2V5d29yZCc7XHJcbiAgICBpZ25vcmVkQ29udGVudEhlYWRlclJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnU2VsZWN0ZWQnO1xyXG5cclxuICAgIGNvbnN0IHNvcnRlZElnbm9yZWRMaXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuc29ydChcclxuICAgICAgKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IGlnbm9yZWRDb250ZW50VGJvZHkgPSBpZ25vcmVkQ29udGVudFRhYmxlLmNyZWF0ZVRCb2R5KCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZElnbm9yZWRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHsga2V5d29yZCwgY291bnQsIGlzU2VsZWN0ZWQgfSA9IHNvcnRlZElnbm9yZWRMaXN0W2ldO1xyXG5cclxuICAgICAgY29uc3Qgcm93ID0gaWdub3JlZENvbnRlbnRUYm9keS5pbnNlcnRSb3coKTtcclxuICAgICAgcm93Lmluc2VydENlbGwoMCkudGV4dENvbnRlbnQgPSAoaSArIDEpLnRvU3RyaW5nKCk7XHJcbiAgICAgIHJvdy5pbnNlcnRDZWxsKDEpLnRleHRDb250ZW50ID0gY291bnQgPyBjb3VudC50b1N0cmluZygpIDogJyc7XHJcbiAgICAgIHJvdy5pbnNlcnRDZWxsKDIpLnRleHRDb250ZW50ID0ga2V5d29yZDtcclxuICAgICAgcm93Lmluc2VydENlbGwoMykuYXBwZW5kQ2hpbGQoXHJcbiAgICAgICAgdGhpcy5jcmVhdGVJZ25vcmVkQ2hlY2tib3goa2V5d29yZCwgaXNTZWxlY3RlZClcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChpZ25vcmVkQ29udGVudFRhYmxlKTtcclxuXHJcbiAgICBjb25zdCByZW1vdmVCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnUmVtb3ZlIHNlbGVjdGVkIG9wdGlvbihzKSBmcm9tIGlnbm9yZWQgY29udGVudCBsaXN0JyxcclxuICAgIH0pO1xyXG4gICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBSZW1vdmUgdGhlIHNlbGVjdGVkIG9wdGlvbnMgZnJvbSB0aGUgaWdub3JlZCBjb250ZW50IGxpc3RcclxuICAgICAgdGhpcy5yZW1vdmVGcm9tSWdub3JlZExpc3QoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgY2hlY2tib3ggZWxlbWVudCBmb3IgYW4gaWdub3JlZCBvcHRpb24uXHJcbiAgICogQHBhcmFtIGtleXdvcmQgLSBUaGUga2V5d29yZCBmb3IgdGhlIGlnbm9yZWQgb3B0aW9uLlxyXG4gICAqIEBwYXJhbSBjaGVja2VkIC0gV2hldGhlciB0aGUgY2hlY2tib3ggaXMgc2VsZWN0ZWQuXHJcbiAgICogQHJldHVybnMgVGhlIGNyZWF0ZWQgY2hlY2tib3ggZWxlbWVudC5cclxuICAgKi9cclxuICBjcmVhdGVJZ25vcmVkQ2hlY2tib3goa2V5d29yZDogc3RyaW5nLCBjaGVja2VkOiBib29sZWFuKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgY2hlY2tib3hDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XHJcbiAgICBjaGVja2JveC5jaGVja2VkID0gY2hlY2tlZDtcclxuICAgIGNoZWNrYm94Q29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcclxuXHJcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZWRDb250ZW50ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQubWFwKFxyXG4gICAgICAgIChpZ25vcmVkQ29udGVudCkgPT5cclxuICAgICAgICAgIGlnbm9yZWRDb250ZW50LmtleXdvcmQgPT09IGtleXdvcmRcclxuICAgICAgICAgICAgPyB7IC4uLmlnbm9yZWRDb250ZW50LCBpc1NlbGVjdGVkOiBjaGVja2JveC5jaGVja2VkIH1cclxuICAgICAgICAgICAgOiBpZ25vcmVkQ29udGVudFxyXG4gICAgICApO1xyXG5cclxuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY2hlY2tib3hDb250YWluZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgdGhlIHNlbGVjdGVkIG9wdGlvbnMgZnJvbSB0aGUgaWdub3JlZCBjb250ZW50IGxpc3QuXHJcbiAgICovXHJcbiAgYXN5bmMgcmVtb3ZlRnJvbUlnbm9yZWRMaXN0KCkge1xyXG4gICAgLy8gR2V0IHNlbGVjdGVkIGlnbm9yZWQgb3B0aW9uc1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRJZ25vcmVkT3B0aW9ucyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZWRDb250ZW50LmZpbHRlcihcclxuICAgICAgKGlnbm9yZWRDb250ZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGlnbm9yZWRDb250ZW50LmlzU2VsZWN0ZWQ7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgZm9yIChjb25zdCBzZWxlY3RlZElnbm9yZWRPcHRpb24gb2Ygc2VsZWN0ZWRJZ25vcmVkT3B0aW9ucykge1xyXG4gICAgICBjb25zdCB7IGtleXdvcmQgfSA9IHNlbGVjdGVkSWdub3JlZE9wdGlvbjtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBmcm9tIGlnbm9yZWQgY29udGVudCBsaXN0XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuZmluZEluZGV4KFxyXG4gICAgICAgIChpZ25vcmVkQ29udGVudCkgPT4gaWdub3JlZENvbnRlbnQua2V5d29yZCA9PT0ga2V5d29yZFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlZENvbnRlbnQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRoZSBpZ25vcmVkIGNvbnRlbnQgbGlzdFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGlzcGxheUJpRGlyZWN0aW9uYWxMaW5rc0xpc3QoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gIFxyXG4gICAgY29uc3QgbGlua2VkQ29udGVudFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ0xpbmtlZCBjb250ZW50IGxpc3QnKVxyXG4gICAgICAuc2V0RGVzYygnQ29udGVudCB0aGF0IGlzIGFscmVhZHkgYmktZGlyZWN0aW9uYWwtbGlua2VkLiBDb3VudCBpbmNsdWRpbmcgbm9uLWJpLWRpcmVjdGlvbmFsLWxpbmtlZCBmb3JtYXQnKTtcclxuICBcclxuICAgIGNvbnN0IHNlYXJjaExpbmtlZENvbnRlbnRCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICB0ZXh0OiAnU2VhcmNoIGxpbmtlZCBjb250ZW50IGluIHZhbHV0IChNYXkgdGFrZSBsb25nIHRpbWUgaWYgdmF1bHQgaXMgYmlnKScsXHJcbiAgICB9KTtcclxuICAgIHNlYXJjaExpbmtlZENvbnRlbnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIHNlYXJjaCBhbHJlYWR5IGxpbmtlZCBjb250ZW50IGluIHZhdWx0XHJcbiAgICAgIHRoaXMuc2VhcmNoTGlua2VkQ29udGVudCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZWFyY2hMaW5rZWRDb250ZW50KCkge1xyXG4gICAgY29uc3QgbGlua2VkQ29udGVudFRhYmxlID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgndGFibGUnLCB7XHJcbiAgICAgIGNsczogJ2NvbnRlbnQtbGlua2VyLWxpbmtlZC1jb250ZW50LXRhYmxlJyxcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgY29uc3QgdGhlYWQgPSBsaW5rZWRDb250ZW50VGFibGUuY3JlYXRlVEhlYWQoKTtcclxuICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoZWFkLmluc2VydFJvdygpO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdOby4nO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdDb3VudCc7XHJcbiAgICBoZWFkZXJSb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ0tleXdvcmQnO1xyXG4gICAgaGVhZGVyUm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTZWxlY3RlZCc7XHJcbiAgXHJcbiAgICBjb25zdCBzb3J0ZWRCaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rc1xyXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xyXG4gIFxyXG4gICAgY29uc3QgdGJvZHkgPSBsaW5rZWRDb250ZW50VGFibGUuY3JlYXRlVEJvZHkoKTtcclxuICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwMDsgLy8gQWRqdXN0IHRoZSBiYXRjaCBzaXplIGFzIG5lZWRlZFxyXG4gIFxyXG4gICAgY29uc3QgcHJvY2Vzc0JhdGNoID0gYXN5bmMgKGJhdGNoSW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICBjb25zdCBiYXRjaFN0YXJ0SW5kZXggPSBiYXRjaEluZGV4ICogYmF0Y2hTaXplO1xyXG4gICAgICBjb25zdCBiYXRjaEVuZEluZGV4ID0gTWF0aC5taW4oXHJcbiAgICAgICAgYmF0Y2hTdGFydEluZGV4ICsgYmF0Y2hTaXplLFxyXG4gICAgICAgIHNvcnRlZEJpTGlua3MubGVuZ3RoXHJcbiAgICAgICk7XHJcbiAgXHJcbiAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBbXTtcclxuICBcclxuICAgICAgZm9yIChsZXQgaSA9IGJhdGNoU3RhcnRJbmRleDsgaSA8IGJhdGNoRW5kSW5kZXg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHsga2V5d29yZCwgY291bnQsIGlzU2VsZWN0ZWQgfSA9IHNvcnRlZEJpTGlua3NbaV07XHJcbiAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGtleXdvcmQgaXMgYWxyZWFkeSBhIGJpLWxpbmsgaW4gYW55IG5vdGVcclxuICAgICAgICBjb25zdCBpc0FscmVhZHlCaUxpbmsgPSBhd2FpdCB0aGlzLmlzQWxyZWFkeUJpTGluayhrZXl3b3JkKTtcclxuICBcclxuICAgICAgICBpZiAoaXNBbHJlYWR5QmlMaW5rICYmICF0aGlzLmlzSWdub3JlZChrZXl3b3JkKSkge1xyXG4gICAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuaW5zZXJ0Um93KCk7XHJcbiAgICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gKGkgKyAxKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgcm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGNvdW50LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICByb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0ga2V5d29yZDtcclxuICAgICAgICAgIHJvdy5pbnNlcnRDZWxsKCkuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDaGVja2JveChrZXl3b3JkLCBpc1NlbGVjdGVkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIElmIHRoZXJlIGFyZSBtb3JlIGl0ZW1zIHRvIHByb2Nlc3MsIGNvbnRpbnVlIHdpdGggdGhlIG5leHQgYmF0Y2hcclxuICAgICAgaWYgKGJhdGNoRW5kSW5kZXggPCBzb3J0ZWRCaUxpbmtzLmxlbmd0aCkge1xyXG4gICAgICAgIGJhdGNoUHJvbWlzZXMucHVzaChwcm9jZXNzQmF0Y2goYmF0Y2hJbmRleCArIDEpKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcclxuICAgIH07XHJcbiAgXHJcbiAgICAvLyBTdGFydCBwcm9jZXNzaW5nIHRoZSBmaXJzdCBiYXRjaFxyXG4gICAgYXdhaXQgcHJvY2Vzc0JhdGNoKDApO1xyXG4gIFxyXG4gICAgLy8gQWxsIGl0ZW1zIGhhdmUgYmVlbiBwcm9jZXNzZWQsIG5vdyB1cGRhdGUgdGhlIFVJXHJcbiAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGxpbmtlZENvbnRlbnRUYWJsZSk7XHJcbiAgXHJcbiAgICBjb25zdCByZW1vdmVCdXR0b24gPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgIHRleHQ6ICdSZW1vdmUgYmktZGlyZWN0aW9uYWwgbGlua3MgZm9yIHNlbGVjdGVkIG9wdGlvbihzKVxcbkFmdGVyIGNsaWNraW5nIHRoZSBidXR0b24sIHRoZSBzZXR0aW5nIHBhZ2Ugd2lsbCBiZSByZWZyZXNoZWQnLFxyXG4gICAgfSk7XHJcbiAgICByZW1vdmVCdXR0b24uY2xhc3NMaXN0LmFkZCgnbXVsdGlsaW5lLWJ1dHRvbicpO1xyXG4gICAgcmVtb3ZlQnV0dG9uLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgIHJlbW92ZUJ1dHRvbi5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZS1saW5lJztcclxuICAgIHJlbW92ZUJ1dHRvbi5zdHlsZS50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFJlbW92ZSBiaS1kaXJlY3Rpb25hbCBsaW5rcyBmb3Igc2VsZWN0ZWQgb3B0aW9ucyBhbmQgcmVmcmVzaCB0aGUgc2V0dGluZyBwYWdlXHJcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlU2VsZWN0ZWRCaUxpbmtzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgcmVtb3ZlU2VsZWN0ZWRCaUxpbmtzKCkge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRCaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcy5maWx0ZXIoXHJcbiAgICAgIChiaUxpbmspID0+IGJpTGluay5pc1NlbGVjdGVkXHJcbiAgICApO1xyXG4gIFxyXG4gICAgLy8gU3RlcCAxOiBDcmVhdGUgYSBzZXQgb2Ygc2VsZWN0ZWQga2V5d29yZHNcclxuICAgIGNvbnN0IHNlbGVjdGVkS2V5d29yZHMgPSBuZXcgU2V0PHN0cmluZz4oXHJcbiAgICAgIHNlbGVjdGVkQmlMaW5rcy5tYXAoKGJpTGluaykgPT4gYmlMaW5rLmtleXdvcmQpXHJcbiAgICApO1xyXG4gIFxyXG4gICAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcclxuICAgIGNvbnN0IG5vdGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVQYXRoT2ZFeGNsdWRlZE5vdGVzID09PSAnJ1xyXG4gICAgICA/IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxyXG4gICAgICA6IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiAhZmlsZS5wYXRoLmluY2x1ZGVzKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbGF0aXZlUGF0aE9mRXhjbHVkZWROb3Rlcy50b1N0cmluZygpKSk7XHJcbiAgXHJcbiAgICBsZXQgaW5kZXhDb3VudCA9IDA7XHJcbiAgXHJcbiAgICAvLyBTdGVwIDI6IEl0ZXJhdGUgdGhyb3VnaCBhbGwgbm90ZXMgaW4gdGhlIGxpYnJhcnlcclxuICAgIGZvciAoY29uc3Qgbm90ZSBvZiBub3Rlcykge1xyXG4gICAgICBsZXQgY29udGVudCA9IGF3YWl0IHZhdWx0LnJlYWQobm90ZSk7XHJcbiAgICAgIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIFxyXG4gICAgICAvLyBTdGVwIDM6IENoZWNrIGlmIHRoZSBub3RlIGNvbnRhaW5zIGFueSBvZiB0aGUgc2VsZWN0ZWQga2V5d29yZHNcclxuICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEtleXdvcmQgb2Ygc2VsZWN0ZWRLZXl3b3Jkcykge1xyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcclxuICAgICAgICAgIGBcXFxcW1xcXFxbJHtzZWxlY3RlZEtleXdvcmR9XFxcXF1cXFxcXWAsXHJcbiAgICAgICAgICAnZydcclxuICAgICAgICApO1xyXG4gIFxyXG4gICAgICAgIGlmIChjb250ZW50Lm1hdGNoKHJlZ2V4KSkge1xyXG4gICAgICAgICAgLy8gU3RlcCA0OiBSZW1vdmUgdGhlIGJpZGlyZWN0aW9uYWwgbGlua1xyXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWdleCwgc2VsZWN0ZWRLZXl3b3JkKTtcclxuICAgICAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gU3RlcCA1OiBVcGRhdGUgdGhlIG5vdGUgaWYgaXQgd2FzIG1vZGlmaWVkXHJcbiAgICAgIGlmIChtb2RpZmllZCkge1xyXG4gICAgICAgIGF3YWl0IHZhdWx0Lm1vZGlmeShub3RlLCBjb250ZW50KTtcclxuICAgICAgICBpbmRleENvdW50Kys7XHJcbiAgICAgICAgdGhpcy5zaG93UHJvZ3Jlc3MoaW5kZXhDb3VudCwgbm90ZXMubGVuZ3RoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gUmVtb3ZlIHRoZSBzZWxlY3RlZCBvcHRpb25zIGZyb20gdGhlIGJpLWxpbmtzIGFycmF5XHJcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaUxpbmtzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlMaW5rcy5maWx0ZXIoXHJcbiAgICAgIChiaUxpbmspID0+ICFiaUxpbmsuaXNTZWxlY3RlZFxyXG4gICAgKTtcclxuICBcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgbmV3IE5vdGljZSgnU2VsZWN0ZWQgYmktZGlyZWN0aW9uYWwgbGlua3MgcmVtb3ZlZCEnKTtcclxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNlYXJjaFBvc3NpYmxlQmlMaW5rcygpO1xyXG4gICAgYXdhaXQgdGhpcy5kaXNwbGF5KCk7XHJcbiAgfSAgXHJcblxyXG4gIGFzeW5jIHNob3dQcm9ncmVzcyhpbmRleENvdW50OiBudW1iZXIsIHRvdGFsTnVtYmVyOiBudW1iZXIpIHtcclxuICAgIGlmICghdGhpcy5ub3RpY2UpIHtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGBVcGRhdGluZzogJHtpbmRleENvdW50fSBvZiAke3RvdGFsTnVtYmVyfWA7XHJcbiAgICAgIHRoaXMubm90aWNlID0gbmV3IE5vdGljZShtZXNzYWdlKTtcclxuICBcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZU5vdGljZSgpO1xyXG4gICAgICB9LCAzMDAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubm90aWNlLnNldE1lc3NhZ2UoYFVwZGF0aW5nOiAke2luZGV4Q291bnR9IG9mICR7dG90YWxOdW1iZXJ9YCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBpZiAoaW5kZXhDb3VudCA9PT0gdG90YWxOdW1iZXIpIHtcclxuICAgICAgbmV3IE5vdGljZSgnVXBkYXRpbmcgZmluaXNoIScpO1xyXG4gICAgICB0aGlzLmNsb3NlTm90aWNlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIGNsb3NlTm90aWNlKCkge1xyXG4gICAgaWYgKHRoaXMubm90aWNlKSB7XHJcbiAgICAgIHRoaXMubm90aWNlLmhpZGUoKTtcclxuICAgICAgdGhpcy5ub3RpY2UgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXNFO0FBcUJ0RSxJQUFxQixzQkFBckIsY0FBaUQsdUJBQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU90RCxNQUFNLFNBQVM7QUFDYixVQUFNLEtBQUssYUFBYTtBQUV4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LGlCQUFpQixJQUN2QixNQUFNLGlCQUFpQixFQUFFLE9BQU8sVUFBUSxDQUFDLEtBQUssS0FBSyxTQUFTLEtBQUssT0FBTyxTQUFTLDRCQUE0QixTQUFTLENBQUMsQ0FBQztBQUU1SCxRQUFJLGFBQWE7QUFHakIsZUFBVyxRQUFRLE9BQU87QUFDeEIsVUFBSSxVQUFVLE1BQU0sTUFBTSxLQUFLLElBQUk7QUFDbkMsVUFBSSxXQUFXO0FBR2YsaUJBQVcsbUJBQW1CLGtCQUFrQjtBQUM5QyxjQUFNLFFBQVEsSUFBSTtBQUFBLFVBQ2hCLFNBQVM7QUFBQSxVQUNUO0FBQUEsUUFDRjtBQUVBLFlBQUksUUFBUSxNQUFNLEtBQUssR0FBRztBQUV4QixvQkFBVSxRQUFRLFFBQVEsT0FBTyxlQUFlO0FBQ2hELHFCQUFXO0FBQUEsUUFDYjtBQUFBLE1BQ0Y7QUFHQSxVQUFJLFVBQVU7QUFDWixjQUFNLE1BQU0sT0FBTyxNQUFNLE9BQU87QUFDaEM7QUFDQSxhQUFLLGFBQWEsWUFBWSxNQUFNLE1BQU07QUFBQSxNQUM1QztBQUFBLElBQ0Y7QUFHQSxTQUFLLE9BQU8sU0FBUyxVQUFVLEtBQUssT0FBTyxTQUFTLFFBQVE7QUFBQSxNQUMxRCxDQUFDLFdBQVcsQ0FBQyxPQUFPO0FBQUEsSUFDdEI7QUFFQSxVQUFNLEtBQUssT0FBTyxhQUFhO0FBQy9CLFFBQUksdUJBQU8sd0NBQXdDO0FBQ25ELFVBQU0sS0FBSyxPQUFPLHNCQUFzQjtBQUN4QyxVQUFNLEtBQUssUUFBUTtBQUFBLEVBQ3JCO0FBQUEsRUFFQSxNQUFNLGFBQWEsWUFBb0IsYUFBcUI7QUFDMUQsUUFBSSxDQUFDLEtBQUssUUFBUTtBQUNoQixZQUFNLFVBQVUsYUFBYSxpQkFBaUI7QUFDOUMsV0FBSyxTQUFTLElBQUksdUJBQU8sT0FBTztBQUVoQyxpQkFBVyxNQUFNO0FBQ2YsYUFBSyxZQUFZO0FBQUEsTUFDbkIsR0FBRyxHQUFJO0FBQUEsSUFDVCxPQUFPO0FBQ0wsV0FBSyxPQUFPLFdBQVcsYUFBYSxpQkFBaUIsYUFBYTtBQUFBLElBQ3BFO0FBRUEsUUFBSSxlQUFlLGFBQWE7QUFDOUIsVUFBSSx1QkFBTyxrQkFBa0I7QUFDN0IsV0FBSyxZQUFZO0FBQUEsSUFDbkI7QUFBQSxFQUNGO0FBQUEsRUFFQSxNQUFNLGNBQWM7QUFDbEIsUUFBSSxLQUFLLFFBQVE7QUFDZixXQUFLLE9BQU8sS0FBSztBQUNqQixXQUFLLFNBQVM7QUFBQSxJQUNoQjtBQUFBLEVBQ0Y7QUFDRjsiLAogICJuYW1lcyI6IFtdCn0K
